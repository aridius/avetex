<?xml version="1.0" encoding="utf-8"?>
<modification>
  <name>deluxe</name>
  <code>deluxe</code>
  <version>v_1</version>
  <author>mrz</author>
<file path="admin/controller/common/header.php">
<operation>
			  <search><![CDATA[
			$this->load->language('common/header');
			  ]]></search>
			  <add position="after"><![CDATA[
			$this->load->language('extension/module/deluxe');
			  ]]></add>
</operation>
<operation>
			<search><![CDATA[
			$data['logout'] = $this->url->link('common/logout', 'user_token=' . $this->session->data['user_token'], true);
			]]></search>
			<add position="after">
			<![CDATA[
			$data['istall_theme'] = $this->url->link('tool/installtheme', 'user_token=' . $this->session->data['user_token'], true);
			$data['theme_setting'] = $this->url->link('extension/theme/deluxe&store_id=0', 'user_token=' . $this->session->data['user_token'], true);
			$data['module_setting'] = $this->url->link('marketplace/extension', 'user_token=' . $this->session->data['user_token'] . '&type=module', true);
			]]></add>
</operation>
</file>
<file path="admin/view/template/common/header.twig">
<operation>
			<search><![CDATA[
			<ul class="nav navbar-nav navbar-right">
			]]></search>
			<add position="after"><![CDATA[
			 
			 <li><a href="{{ theme_setting }}" data-toggle="tooltip" data-placement="bottom" title="{{ text_theme_setting }}"> <i style="color:#4174CD" class="fa fa-cog fa-lg"></i></a></li> 
			 <li><a href="{{ module_setting }}" data-toggle="tooltip" data-placement="bottom" title="{{ text_module_setting }}"> <i style="color:#4174CD" class="fa fa-align-justify"></i></a></li> 
			]]></add>
</operation>
<operation>
			<search><![CDATA[
			</head>
			]]></search>
			<add position="before"><![CDATA[
			<style>
			.im_option {
			color: #777;
			background: #fff;
			padding: 3px 16px;
			border: 1px solid #9eaaac;
			border-radius: 50px;
			font-size: 13px;
			display: block;
			border-radius: 50px;
			}
			.options_none {
			display: none;
			}
			input:checked + .im_option{
			border: 1px solid #0989D2;
			border-radius: 50px;
			background: #0989D2;
			color: #fff;
			}
			.them .radio-inline {
			padding-left: 0;
			}
			</style>
			]]></add>
</operation>
</file> 
<file path="admin/controller/common/column_left.php">
<operation>
			<search><![CDATA[
			$this->load->model('sale/order');
			]]></search>
			<add position="before"><![CDATA[
			$data['menus'][] = array(
				'id'       => 'menu-install',
				'icon'	   => 'fa-diamond',
				'name'	   => $this->language->get('text_istall_theme'),
				'href'     => $this->url->link('tool/installtheme', 'user_token=' . $this->session->data['user_token'], true),
				'children' => array()
			);	
			]]></add>
</operation>
</file>  
<file path="admin/controller/catalog/category.php">
<!-- stickers -->
<operation>
      <search><![CDATA[
					if (isset($this->request->post['column'])) {
      ]]></search>
      <add position="before"><![CDATA[
			if (isset($this->request->post['stickers'])) {
				$data['stickers'] = $this->request->post['stickers'];
			} elseif (!empty($category_info)) {
				$data['stickers'] = $category_info['stickers'];
			} else {
				$data['stickers'] = 0;
			}
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$this->load->model('tool/image');
      ]]></search>
      <add position="before"><![CDATA[

			if (isset($this->request->post['image_menu_ico'])) {
				$data['image_menu_ico'] = $this->request->post['image_menu_ico'];
			} elseif (!empty($category_info)) {
				$data['image_menu_ico'] = $category_info['image_menu_ico'];
			} else {
				$data['image_menu_ico'] = '';
			}
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$this->load->model('tool/image');
      ]]></search>
      <add position="after"><![CDATA[
			if (isset($this->request->post['image']) && is_file(DIR_IMAGE . $this->request->post['image_menu_ico'])) {
				$data['thumb_menu_ico'] = $this->model_tool_image->resize($this->request->post['image_menu_ico'], 100, 100);
			} elseif (!empty($category_info) && is_file(DIR_IMAGE . $category_info['image_menu_ico'])) {
				$data['thumb_menu_ico'] = $this->model_tool_image->resize($category_info['image_menu_ico'], 100, 100);
			} else {
				$data['thumb_menu_ico'] = $this->model_tool_image->resize('no_image.png', 100, 100);
			}
		
      ]]></add>
</operation>

<operation>
      <search><![CDATA[
		    $this->load->language('catalog/category');
      ]]></search>
      <add position="after"><![CDATA[
            $this->load->language('extension/module/deluxe');
      ]]></add>
</operation>
</file>
<file path="admin/model/catalog/category.php">
<!-- stickers -->
<operation>
      <search><![CDATA[
            $this->db->query("UPDATE " . DB_PREFIX . "category SET parent_id = '" . (int)$data['parent_id'] . "', `top` = '" . (isset($data['top']) ? (int)$data['top'] : 0) . "', `column` = '" . (int)$data['column'] . "', sort_order = '" . (int)$data['sort_order'] . "', status = '" . (int)$data['status'] . "', noindex = '" . (int)$data['noindex'] . "', date_modified = NOW() WHERE category_id = '" . (int)$category_id . "'");
	  ]]></search>
      <add position="replace"><![CDATA[
	        $this->db->query("UPDATE " . DB_PREFIX . "category SET parent_id = '" . (int)$data['parent_id'] . "', `top` = '" . (isset($data['top']) ? (int)$data['top'] : 0) . "', `column` = '" . (int)$data['column'] . "', sort_order = '" . (int)$data['sort_order'] . "', status = '" . (int)$data['status'] . "', noindex = '" . (int)$data['noindex'] . "', `stickers` = '" . (isset($data['stickers']) ? (int)$data['stickers'] : 0) . "', date_modified = NOW() WHERE category_id = '" . (int)$category_id . "'");
      ]]></add>
</operation>
<!-- stickers  -->
<!-- image_menu -->
<operation>
      <search><![CDATA[
			category_id = $this->db->getLastId();
      ]]></search>
      <add position="after"><![CDATA[
			if (isset($data['image_menu_ico'])) {
				$this->db->query("UPDATE " . DB_PREFIX . "category SET image_menu_ico = '" . $this->db->escape($data['image_menu_ico']) . "' WHERE category_id = '" . (int)$category_id . "'");
			}
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
			$this->db->query("DELETE FROM " . DB_PREFIX . "category_description WHERE category_id = '" . (int)$category_id . "'");
      ]]></search>
      <add position="before"><![CDATA[

		    if (isset($data['image_menu_ico'])) {
			$this->db->query("UPDATE " . DB_PREFIX . "category SET image_menu_ico = '" . $this->db->escape($data['image_menu_ico']) . "' WHERE category_id = '" . (int)$category_id . "'");
		    }
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
            $this->db->query("INSERT INTO " . DB_PREFIX . "category SET parent_id = '" . (int)$data['parent_id'] . "', `top` = '" . (isset($data['top']) ? (int)$data['top'] : 0) . "', `column` = '" . (int)$data['column'] . "', sort_order = '" . (int)$data['sort_order'] . "', status = '" . (int)$data['status'] . "', date_modified = NOW(), date_added = NOW()");
      ]]></search>
      <add position="replace"><![CDATA[
            $this->db->query("INSERT INTO " . DB_PREFIX . "category SET parent_id = '" . (int)$data['parent_id'] . "', `top` = '" . (isset($data['top']) ? (int)$data['top'] : 0) . "', `column` = '" . (int)$data['column'] . "', sort_order = '" . (int)$data['sort_order'] . "', status = '" . (int)$data['status'] . "', date_modified = NOW(), date_added = NOW()");
      ]]></add>
</operation>
</file>
<file path="admin/view/template/catalog/category_form.twig">
<!-- stickers -->
<operation>
      <search><![CDATA[
					<div class="tab-pane" id="tab-data">
      ]]></search>
      <add position="after"><![CDATA[
                    <div class="form-group">
						    <label class="col-sm-2 control-label" >Stickers</label>
						    <div class="col-sm-10">
						    <select name="stickers" class="form-control">
									<option value="0"{% if (stickers < 1) %} {{ ' selected="selected"' }} {% endif %}>no</option>
									<option value="1"{% if (stickers == 1) %} {{ ' selected="selected"' }} {% endif %}>new</option>
									<option value="2"{% if (stickers == 2) %} {{ ' selected="selected"' }} {% endif %}>sale</option>
									<option value="3"{% if (stickers == 3) %} {{ ' selected="selected"' }} {% endif %}>top</option>
							</select>
							</div>
                   </div>
      ]]></add>
</operation>

<operation>
      <search index="12"><![CDATA[
					 <div class="form-group">
      ]]></search>
      <add position="before"><![CDATA[
			  <div class="form-group">
                <label class="col-sm-2 control-label">{{ entry_image_menu_ico }}</label>
                <div class="col-sm-10"><a href="" id="thumb-image_menu_ico" data-toggle="image" class="img-thumbnail"><img src="{{ thumb_menu_ico }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a>
                  <input type="hidden" name="image_menu_ico" value="{{ image_menu_ico }}" id="input-image_menu_ico" />
                </div>
              </div>
      ]]></add>
</operation>
</file>
<file path="catalog/controller/common/header.php">
<!-- language -->
<operation>
      <search><![CDATA[
					$this->load->language('common/header');
      ]]></search>
      <add position="after"><![CDATA[
                    $this->load->language('extension/module/deluxe');
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['cart'] = $this->load->controller('common/cart');
      ]]></search>
      <add position="after"><![CDATA[
                   $data['cart2'] = $this->load->controller('common/cart2');
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['telephone'] = $this->config->get('config_telephone');
      ]]></search>
      <add position="after"><![CDATA[
	  		   $data['compare'] = $this->url->link('product/compare');
			   $data['searchlink'] = $this->url->link('product/search');
			   $data['text_compare'] = sprintf($this->language->get('text_compare'), (isset($this->session->data['compare']) ? count($this->session->data['compare']) : 0));	
      ]]></add>
</operation>	  
	  


<operation>
      <search><![CDATA[
					$data['cart'] = $this->load->controller('common/cart');
      ]]></search>
      <add position="after"><![CDATA[
		       $data['language_id'] = $this->config->get('config_language_id');
			   $data['config_minify'] = $this->config->get('config_minify');
					
						$data['deluxe_account_top'] = $this->config->get('theme_deluxe_account_top');
						$data['deluxe_top_links6'] = $this->config->get('theme_deluxe_top_links6');
						$data['deluxe_telephone_top'] = $this->config->get('theme_deluxe_telephone_top');
						$data['deluxe_wishlist_top'] = $this->config->get('theme_deluxe_wishlist_top');
						$data['deluxe_compare_top'] = $this->config->get('theme_deluxe_compare_top');
						$data['deluxe_calltop'] = $this->config->get('theme_deluxe_calltop');
						$data['deluxe_order_top'] = $this->config->get('theme_deluxe_order_top');
						$data['deluxe_transaction_top'] = $this->config->get('theme_deluxe_transaction_top');
						$data['deluxe_download_top'] = $this->config->get('theme_deluxe_download_top');
						$data['deluxe_telephone_mainheader'] = $this->config->get('theme_deluxe_telephone_mainheader');
						$data['deluxe_telephone_mainheader2'] = str_replace(array('(', ')', ' ', '-'), '', $this->config->get('theme_deluxe_telephone_mainheader'));
						$data['deluxe_telephone_mainheadern2'] = $this->config->get('theme_deluxe_telephone_mainheader2');
						$data['deluxe_telephone_mainheader2n2'] = str_replace(array('(', ')', ' ', '-'), '', $this->config->get('theme_deluxe_telephone_mainheader2'));				
						$data['deluxe_arrowup'] = $this->config->get('theme_deluxe_arrowup');
						$data['deluxe_callleft'] = $this->config->get('theme_deluxe_callleft');
						$data['deluxe_image_location_width'] = $this->config->get('theme_deluxe_image_location_width');
						$data['deluxe_image_location_height'] = $this->config->get('theme_deluxe_image_location_height');			
						$data['deluxe_description_cat'] = $this->config->get('theme_deluxe_description_cat');
						$data['deluxe_css'] = html_entity_decode ($this->config->get('theme_deluxe_css'), ENT_QUOTES, 'UTF-8');	
						$data['deluxe_js'] = html_entity_decode ($this->config->get('theme_deluxe_js'), ENT_QUOTES, 'UTF-8');	
						$data['deluxe_height_symbolst'] = $this->config->get('theme_deluxe_height_symbolst');
						$data['deluxe_height_symbolst2'] = $this->config->get('theme_deluxe_height_symbolst')*19;
						$data['deluxe_preloader'] = $this->config->get('theme_deluxe_preloader');
						$data['deluxe_cart_right'] = $this->config->get('theme_deluxe_cart_right');
						$data['deluxe_wish_right'] = $this->config->get('theme_deluxe_wish_right');	
						$data['deluxe_comp_right'] = $this->config->get('theme_deluxe_comp_right');
						$data['deluxe_right_tittle'] = $this->config->get('theme_deluxe_right_tittle');
						$data['deluxe_show_cart'] = $this->config->get('theme_deluxe_show_cart');
						$data['deluxe_show_price'] = $this->config->get('theme_deluxe_show_price');
						$data['deluxe_callleftr'] = $this->config->get('theme_deluxe_callleftr');
						$data['deluxe_arrowup_mobile'] = $this->config->get('theme_deluxe_arrowup_mobile');	
						$data['deluxe_vmenuheight'] = $this->config->get('theme_deluxe_vmenuheight');
						$data['deluxe_footer_limit_height'] = $this->config->get('theme_deluxe_footer_limit_height');
						$data['deluxe_show_topmenu'] = $this->config->get('theme_deluxe_show_topmenu');
						$data['deluxe_show_topmenu_set'] = $this->config->get('theme_deluxe_show_topmenu_set');
                        $data['deluxe_show_topmenu_ico'] = $this->config->get('theme_deluxe_show_topmenu_ico');		
						$data['deluxe_cssct'] = $this->config->get('theme_deluxe_cssct');
						$data['deluxe_font'] = $this->config->get('theme_deluxe_font');
						$data['deluxe_minify'] = $this->config->get('theme_deluxe_minify');
			            $data['deluxe_wl_img'] = html_entity_decode ($this->config->get('theme_deluxe_wl_img'), ENT_QUOTES, 'UTF-8');
					    $data['deluxe_cm_img'] = html_entity_decode ($this->config->get('theme_deluxe_cm_img'), ENT_QUOTES, 'UTF-8');					
	                    $data['deluxe_seevmenurad'] = $this->config->get('theme_deluxe_seevmenurad'); 	
						$data['deluxe_show_fluid_map_footer'] = $this->config->get('theme_deluxe_show_fluid_map_footer');
						$data['deluxe_show_map_open'] = $this->config->get('theme_deluxe_show_map_open');
						$data['deluxe_categories_limit_height'] = $this->config->get('theme_deluxe_categories_limit_height');
						$data['aridius_text_home_height'] = $this->config->get('aridius_text_home_height');
						$data['deluxe_border_cart'] = $this->config->get('theme_deluxe_border_cart');
						$data['deluxe_border_stickers'] = $this->config->get('theme_deluxe_border_stickers');
						$data['deluxe_options_prise'] = $this->config->get('theme_deluxe_options_prise');
						$data['deluxe_options_prise_cat'] = $this->config->get('theme_deluxe_options_prise_cat');
						$data['deluxe_options_circle_cat'] = $this->config->get('theme_deluxe_options_circle_cat');
						$data['deluxe_options_prisefor_cat'] = $this->config->get('theme_deluxe_options_prisefor_cat');
						$data['deluxe_options_prisefor'] = $this->config->get('theme_deluxe_options_prisefor');
						$data['deluxe_compact_list'] = $this->config->get('theme_deluxe_compact_list');
						$data['deluxe_cat_quantity'] = $this->config->get('theme_deluxe_cat_quantity');
						$data['deluxe_seevmenuwlv'] = $this->config->get('theme_deluxe_seevmenuwlv'); 
						$data['aridius_livesearch_status'] = $this->config->get('module_aridius_livesearch_status');  					
					  	$data['deluxe_seevmenu_menu_open_cl'] = $this->config->get('theme_deluxe_seevmenu_menu_open_cl');	
						$data['deluxe_countcat_md'] = 1 + $this->config->get('theme_deluxe_countcat_md');
					    $data['deluxe_countcat_lg'] = 1 + $this->config->get('theme_deluxe_countcat_lg');
					    $data['deluxe_countcat_xl'] = 1 + $this->config->get('theme_deluxe_countcat_xl');	 
						$data['deluxe_show_fimg'] = $this->config->get('theme_deluxe_show_fimg');
						$data['deluxe_seevmenu_menu'] = $this->config->get('theme_deluxe_seevmenu_menu');
					    $data['deluxe_tell'] = $this->config->get('theme_deluxe_tell');
					    $data['deluxe_tell_text'] = html_entity_decode ($this->config->get('theme_deluxe_tell_text')[$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8');	
	                    $data['deluxe_seevmenu_menulogo'] = $this->config->get('theme_deluxe_seevmenu_menulogo');
						$data['deluxe_seehmenu_menu'] = $this->config->get('theme_deluxe_seehmenu_menu');
						$data['deluxe_work_time1'] = $this->config->get('theme_deluxe_work_time1')[$this->config->get('config_language_id')];  
						$data['deluxe_work_time2'] = $this->config->get('theme_deluxe_work_time2')[$this->config->get('config_language_id')];
						$data['deluxe_work_time'] = $this->config->get('theme_deluxe_work_time')[$this->config->get('config_language_id')];  
						$data['deluxe_mail_header'] = $this->config->get('theme_deluxe_mail_header');
						$data['deluxe_address'] = html_entity_decode ($this->config->get('theme_deluxe_address')[$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8');
						$data['deluxe_svg_logo'] = html_entity_decode ($this->config->get('theme_deluxe_svg_logo'), ENT_QUOTES, 'UTF-8');

						$deluxe_top_links3 = $this->config->get('theme_deluxe_top_links3');
						$data['theme_tells'] = array();
						if(isset($deluxe_top_links3) && is_array($deluxe_top_links3)) foreach ($deluxe_top_links3 as $theme_tells) {
							$data['theme_tells'][] = array(
									'title' 			=> html_entity_decode($theme_tells['title'][$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8'),
									'title2' 			=> str_replace(array('(', ')', ' ', '-'), '', $theme_tells['title'][$this->config->get('config_language_id')] ),
							
									'image' 			=> $this->model_tool_image->resize($theme_tells['image'],18, 18),
									
							);
						}				  

						  $data['deluxe_color1'] = $this->config->get('theme_deluxe_color1');
						  $data['deluxe_color2'] = $this->config->get('theme_deluxe_color2');
						  $data['deluxe_color3'] = $this->config->get('theme_deluxe_color3');
						  $data['deluxe_color4'] = $this->config->get('theme_deluxe_color4');
						  $data['deluxe_color5'] = $this->config->get('theme_deluxe_color5');
						  $data['deluxe_color6'] = $this->config->get('theme_deluxe_color6');
						  $data['deluxe_color7'] = $this->config->get('theme_deluxe_color7');
						  $data['deluxe_color8'] = $this->config->get('theme_deluxe_color8');
						  $data['deluxe_color9'] = $this->config->get('theme_deluxe_color9');
						  $data['deluxe_color10'] = $this->config->get('theme_deluxe_color10');
						  $data['deluxe_color11'] = $this->config->get('theme_deluxe_color11');
						  $data['deluxe_color12'] = $this->config->get('theme_deluxe_color12');
						  $data['deluxe_color13'] = $this->config->get('theme_deluxe_color13');
						  $data['deluxe_color14'] = $this->config->get('theme_deluxe_color14');
						  $data['deluxe_color15'] = $this->config->get('theme_deluxe_color15');
						  $data['deluxe_color16'] = $this->config->get('theme_deluxe_color16');
					 	  $data['deluxe_color17'] = $this->config->get('theme_deluxe_color17');
						  $data['deluxe_color18'] = $this->config->get('theme_deluxe_color18');
					 	  $data['deluxe_color19'] = $this->config->get('theme_deluxe_color19');
						  $data['deluxe_color20'] = $this->config->get('theme_deluxe_color20');
						  $data['deluxe_color21'] = $this->config->get('theme_deluxe_color21');
						  $data['deluxe_color22'] = $this->config->get('theme_deluxe_color22');
						  $data['deluxe_color23'] = $this->config->get('theme_deluxe_color23');
						  $data['deluxe_color24'] = $this->config->get('theme_deluxe_color24');
						  $data['deluxe_color25'] = $this->config->get('theme_deluxe_color25');
						  $data['deluxe_color26'] = $this->config->get('theme_deluxe_color26');
						  $data['deluxe_color27'] = $this->config->get('theme_deluxe_color27');
						  $data['deluxe_color28'] = $this->config->get('theme_deluxe_color28');
						  $data['deluxe_color29'] = $this->config->get('theme_deluxe_color29');
						  $data['deluxe_color30'] = $this->config->get('theme_deluxe_color30');
						  $data['deluxe_color31'] = $this->config->get('theme_deluxe_color31');
						  $data['deluxe_color32'] = $this->config->get('theme_deluxe_color32');
						  $data['deluxe_color33'] = $this->config->get('theme_deluxe_color33');
						  $data['deluxe_color34'] = $this->config->get('theme_deluxe_color34');
						  $data['deluxe_color35'] = $this->config->get('theme_deluxe_color35');
						  $data['deluxe_color36'] = $this->config->get('theme_deluxe_color36');
					      $data['deluxe_color37'] = $this->config->get('theme_deluxe_color37');
					      $data['deluxe_color38'] = $this->config->get('theme_deluxe_color38');
						  $data['deluxe_color39'] = $this->config->get('theme_deluxe_color39'); 
						  $data['deluxe_color40'] = $this->config->get('theme_deluxe_color40');  
						  $data['deluxe_color41'] = $this->config->get('theme_deluxe_color41'); 
						  $data['deluxe_color42'] = $this->config->get('theme_deluxe_color42'); 
						  $data['deluxe_color43'] = $this->config->get('theme_deluxe_color43');
						  $data['deluxe_color44'] = $this->config->get('theme_deluxe_color44');
						  $data['deluxe_color45'] = $this->config->get('theme_deluxe_color45');
						  $data['deluxe_color46'] = $this->config->get('theme_deluxe_color46');  
						  $data['deluxe_color48'] = $this->config->get('theme_deluxe_color48'); 
						  $data['deluxe_color49'] = $this->config->get('theme_deluxe_color49');
						  $data['deluxe_color50'] = $this->config->get('theme_deluxe_color50');
						  $data['deluxe_color51'] = $this->config->get('theme_deluxe_color51');
						  $data['deluxe_color55'] = $this->config->get('theme_deluxe_color55');
						  $data['deluxe_color56'] = $this->config->get('theme_deluxe_color56');  
						  $data['deluxe_color57'] = $this->config->get('theme_deluxe_color57'); 
						  $data['deluxe_color58'] = $this->config->get('theme_deluxe_color58'); 
						  $data['deluxe_color59'] = $this->config->get('theme_deluxe_color59');
						  $data['deluxe_color60'] = $this->config->get('theme_deluxe_color60');
						  $data['deluxe_color61'] = $this->config->get('theme_deluxe_color61');
						  $data['deluxe_color62'] = $this->config->get('theme_deluxe_color62');  
						  $data['deluxe_color63'] = $this->config->get('theme_deluxe_color63'); 
						  $data['deluxe_color64'] = $this->config->get('theme_deluxe_color64'); 
						  $data['deluxe_color65'] = $this->config->get('theme_deluxe_color65');
						  $data['deluxe_color66'] = $this->config->get('theme_deluxe_color66'); 
						  $data['deluxe_color67'] = $this->config->get('theme_deluxe_color67');
						  $data['deluxe_color68'] = $this->config->get('theme_deluxe_color68'); 
						  $data['deluxe_color69'] = $this->config->get('theme_deluxe_color69'); 
						  $data['deluxe_color70'] = $this->config->get('theme_deluxe_color70'); 
						  $data['deluxe_color71'] = $this->config->get('theme_deluxe_color71'); 
						  $data['deluxe_color72'] = $this->config->get('theme_deluxe_color72'); 
						  $data['deluxe_color73'] = $this->config->get('theme_deluxe_color73'); 
						  $data['deluxe_color74'] = $this->config->get('theme_deluxe_color74'); 
					      $data['deluxe_color75'] = $this->config->get('theme_deluxe_color75'); 
				    	  $data['deluxe_color76'] = $this->config->get('theme_deluxe_color76');
					      $data['deluxe_color80'] = $this->config->get('theme_deluxe_color80');
					      $data['deluxe_color81'] = $this->config->get('theme_deluxe_color81');
					      $data['deluxe_color82'] = $this->config->get('theme_deluxe_color82'); 
					      $data['deluxe_color84'] = $this->config->get('theme_deluxe_color84'); 
						  $data['deluxe_color86'] = $this->config->get('theme_deluxe_color86'); 
						  $data['deluxe_color87'] = $this->config->get('theme_deluxe_color87'); 
						  $data['deluxe_color88'] = $this->config->get('theme_deluxe_color88'); 
						  $data['deluxe_color89'] = $this->config->get('theme_deluxe_color89'); 
						  $data['deluxe_color90'] = $this->config->get('theme_deluxe_color90'); 
						  $data['deluxe_color91'] = $this->config->get('theme_deluxe_color91'); 
						  $data['deluxe_color92'] = $this->config->get('theme_deluxe_color92'); 
						  $data['deluxe_color93'] = $this->config->get('theme_deluxe_color93'); 
						  $data['deluxe_color94'] = $this->config->get('theme_deluxe_color94'); 
						  $data['deluxe_color95'] = $this->config->get('theme_deluxe_color95'); 
						  $data['deluxe_color96'] = $this->config->get('theme_deluxe_color96'); 
						  $data['deluxe_color97'] = $this->config->get('theme_deluxe_color97'); 
						  $data['deluxe_color98'] = $this->config->get('theme_deluxe_color98'); 
                          $data['deluxe_color102'] = $this->config->get('theme_deluxe_color102');  
						  $data['deluxe_color103'] =  mb_eregi_replace('[^0-9,]', '', $this->config->get('theme_deluxe_color103'));
						  $data['deluxe_color104'] = $this->config->get('theme_deluxe_color104'); 
						  $data['deluxe_color105'] = $this->config->get('theme_deluxe_color105'); 
						  $data['deluxe_color106'] = $this->config->get('theme_deluxe_color106'); 
					      $data['deluxe_color107'] = $this->config->get('theme_deluxe_color107'); 
						  $data['deluxe_color108'] = $this->config->get('theme_deluxe_color108'); 
						  $data['deluxe_color109'] = $this->config->get('theme_deluxe_color109');  
						  $data['deluxe_color110'] = $this->config->get('theme_deluxe_color110');
						  $data['deluxe_color111'] = $this->config->get('theme_deluxe_color111'); 
						  $data['deluxe_color112'] = $this->config->get('theme_deluxe_color112'); 
						  $data['deluxe_color113'] = $this->config->get('theme_deluxe_color113'); 
						  $data['deluxe_color114'] = $this->config->get('theme_deluxe_color114'); 
						  $data['deluxe_color115'] = $this->config->get('theme_deluxe_color115'); 
						  $data['deluxe_color116'] = $this->config->get('theme_deluxe_color116');
						  $data['deluxe_color117'] = $this->config->get('theme_deluxe_color117');
						  $data['deluxe_color119'] = $this->config->get('theme_deluxe_color119'); 
						  $data['deluxe_color120'] = $this->config->get('theme_deluxe_color120'); 
						  $data['deluxe_color121'] = $this->config->get('theme_deluxe_color121'); 
						  $data['deluxe_color122'] = $this->config->get('theme_deluxe_color122'); 
						  $data['deluxe_color123'] = $this->config->get('theme_deluxe_color123'); 
						  $data['deluxe_color124'] = $this->config->get('theme_deluxe_color124'); 
						  $data['deluxe_color125'] = $this->config->get('theme_deluxe_color125'); 
						  $data['deluxe_color126'] = $this->config->get('theme_deluxe_color126');
						  $data['deluxe_color127'] = $this->config->get('theme_deluxe_color127'); 
						  $data['deluxe_color128'] = $this->config->get('theme_deluxe_color128'); 
						  $data['deluxe_color129'] = $this->config->get('theme_deluxe_color129'); 
						  $data['deluxe_color130'] = $this->config->get('theme_deluxe_color130'); 
						  $data['deluxe_color131'] = $this->config->get('theme_deluxe_color131'); 
						  $data['deluxe_color132'] = $this->config->get('theme_deluxe_color132');
      ]]></add>
 </operation>

  <operation>
      <search><![CDATA[
					$data['language'] = $this->load->controller('common/language');
      ]]></search>
      <add position="after"><![CDATA[
					$data['content_topfl'] =  $this->load->controller('common/content_topfl');
					$data['content_fluid'] =  $this->load->controller('common/content_fluid');
      ]]></add>
 </operation>
 <operation>
      <search><![CDATA[
					return $this->load->view('common/header', $data);
      ]]></search>
      <add position="before"><![CDATA[
					// For page specific css
					if (isset($this->request->get['route'])) {
						if (isset($this->request->get['product_id'])) {
							$class = '-' . $this->request->get['product_id'];
						} elseif (isset($this->request->get['path'])) {
							$class = '-' . $this->request->get['path'];
						} elseif (isset($this->request->get['manufacturer_id'])) {
							$class = '-' . $this->request->get['manufacturer_id'];
						} elseif (isset($this->request->get['information_id'])) {
							$class = '-' . $this->request->get['information_id'];
						} else {
							$class = '';
						}
						$data['class'] = str_replace('/', '-', $this->request->get['route']) . $class;
					} else {
						$data['class'] = 'common-home';
					}
      ]]></add>
</operation>

<operation>
			<search><![CDATA[
			$this->load->language('common/header');
			]]></search>
			<add position="after">
			<![CDATA[
			$this->load->model('tool/image');
			$data['og_logo'] =  $this->model_tool_image->resize($this->config->get('config_logo'), 300, 300);
			]]></add>
</operation>
</file>

<file path="catalog/controller/common/menu.php">
<!-- 3_lv -->
<operation>
      <search><![CDATA[
					$this->load->model('catalog/product');
      ]]></search>
      <add position="after"><![CDATA[
					$this->load->model('tool/image');
					$data['language_id'] = $this->config->get('config_language_id');
					$data['logged'] = $this->customer->isLogged();
					$data['compare'] = $this->url->link('product/compare');
					$data['text_compare'] = sprintf($this->language->get('text_compare'), (isset($this->session->data['compare']) ? count($this->session->data['compare']) : 0));
					$data['wishlist'] = $this->url->link('account/wishlist', '', true);
					$data['account'] = $this->url->link('account/account', '', true);
					$data['order'] = $this->url->link('account/order', '', true);		
					$data['transaction'] = $this->url->link('account/transaction', '', true);
					$data['download'] = $this->url->link('account/download', '', true);
					$data['logout'] = $this->url->link('account/logout', '', true);
					$data['register'] = $this->url->link('account/register', '', true);
					$data['login'] = $this->url->link('account/login', '', true);
					$data['deluxe_sticky_menu'] = $this->config->get('theme_deluxe_sticky_menu');
					$data['deluxe_hover_menu'] = $this->config->get('theme_deluxe_hover_menu');
					$data['deluxe_col1_menu'] = $this->config->get('theme_deluxe_col1_menu');
					$data['deluxe_ico_home'] = $this->config->get('theme_deluxe_ico_home');
					$data['deluxe_photos_menu'] = $this->config->get('theme_deluxe_photos_menu');
					$data['deluxe_main_photos_menu'] = $this->config->get('theme_deluxe_main_photos_menu');
					$data['deluxe_3lv_menu'] = $this->config->get('theme_deluxe_3lv_menu');
					$data['deluxe_info_menu'] = $this->config->get('theme_deluxe_info_menu');
					$data['deluxe_main_link_menu'] = $this->config->get('theme_deluxe_main_link_menu');
					$data['deluxe_main_link_href_menu'] = $this->config->get('theme_deluxe_main_link_href_menu');
					$data['deluxe_top_links4'] = $this->config->get('theme_deluxe_top_links4');
					$data['deluxe_seevmenu_menu'] = $this->config->get('theme_deluxe_seevmenu_menu');
					$data['deluxe_seevmenu_menu_open'] = $this->config->get('theme_deluxe_seevmenu_menu_open');
					$data['deluxe_vmenu_menu'] = $this->config->get('theme_deluxe_vmenu_menu');
					$data['deluxe_seeall_menu'] = $this->config->get('theme_deluxe_seeall_menu');
					$data['deluxe_countvmenulv'] = $this->config->get('theme_deluxe_countvmenulv');
					$data['deluxe_countcat_md'] = 1 + $this->config->get('theme_deluxe_countcat_md');
					$data['deluxe_countcat_lg'] = 1 + $this->config->get('theme_deluxe_countcat_lg');
					$data['deluxe_countcat_xl'] = 1 + $this->config->get('theme_deluxe_countcat_xl');
					$data['deluxe_top_links8'] = $this->config->get('theme_deluxe_top_links8');
					$data['deluxe_sticker_menu'] = $this->config->get('theme_deluxe_sticker_menu');
					$data['deluxe_name_sticker_menu_new'] = $this->config->get('theme_deluxe_name_sticker_menu_new');
					$data['deluxe_name_sticker_menu_top'] = $this->config->get('theme_deluxe_name_sticker_menu_top');
					$data['deluxe_name_sticker_menu_sale'] = $this->config->get('theme_deluxe_name_sticker_menu_sale');
					$data['deluxe_mob_logo'] = $this->config->get('theme_deluxe_mob_logo');
				    $data['deluxe_mob_home'] = $this->config->get('theme_deluxe_mob_home');
					$data['deluxe_mobcat_group'] = $this->config->get('theme_deluxe_mobcat_group');
					$data['deluxe_mob_tell'] = $this->config->get('theme_deluxe_mob_tell');
					$data['deluxe_mob_work'] = $this->config->get('theme_deluxe_mob_work');
					$data['deluxe_mob_mail'] = $this->config->get('theme_deluxe_mob_mail');
					$data['deluxe_mob_address'] = $this->config->get('theme_deluxe_mob_address');
					$data['deluxe_mob_cart'] = $this->config->get('theme_deluxe_mob_cart');
					$data['deluxe_mob_account'] = $this->config->get('theme_deluxe_mob_account');
					$data['deluxe_seehmenu_menu'] = $this->config->get('theme_deluxe_seehmenu_menu');
					$data['deluxe_seevmenu_menulogo'] = $this->config->get('theme_deluxe_seevmenu_menulogo');
					$data['deluxe_work_time1'] = $this->config->get('theme_deluxe_work_time1')[$this->config->get('config_language_id')];  
					$data['deluxe_work_time2'] = $this->config->get('theme_deluxe_work_time2')[$this->config->get('config_language_id')];
					$data['deluxe_work_time'] = $this->config->get('theme_deluxe_work_time')[$this->config->get('config_language_id')];  
					$data['deluxe_mail_header'] = $this->config->get('theme_deluxe_mail_header');
					$data['deluxe_address'] = html_entity_decode ($this->config->get('theme_deluxe_address')[$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8');
					
					$data['deluxe_photos_menu_width'] = $this->config->get('theme_deluxe_photos_menu_width');
					$data['deluxe_photos_menu_height'] = $this->config->get('theme_deluxe_photos_menu_height');
					$data['deluxe_photos_width_image_main'] = $this->config->get('theme_deluxe_photos_width_image_main');
					$data['deluxe_photos_height_image_main'] = $this->config->get('theme_deluxe_photos_height_image_main');
                    $data['deluxe_top_links6'] = $this->config->get('theme_deluxe_top_links6');
                    $deluxe_top_links3 = $this->config->get('theme_deluxe_top_links3');
					$data['theme_tells'] = array();
					if(isset($deluxe_top_links3) && is_array($deluxe_top_links3)) foreach ($deluxe_top_links3 as $theme_tells) {
						$data['theme_tells'][] = array(
								'title' 			=> html_entity_decode($theme_tells['title'][$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8'),
								'title2' 			=> str_replace(array('(', ')', ' ', '-'), '', $theme_tells['title'][$this->config->get('config_language_id')] ),
						
								'image' 			=> $this->model_tool_image->resize($theme_tells['image'],18, 18),
								
						);
					 }	

					$data['deluxe_telephone_mainheader'] = $this->config->get('theme_deluxe_telephone_mainheader');
					$data['deluxe_telephone_mainheader2'] = str_replace(array('(', ')', ' ', '-'), '', $this->config->get('theme_deluxe_telephone_mainheader'));
					$data['deluxe_telephone_mainheadern2'] = $this->config->get('theme_deluxe_telephone_mainheader2');
					$data['deluxe_telephone_mainheader2n2'] = str_replace(array('(', ')', ' ', '-'), '', $this->config->get('theme_deluxe_telephone_mainheader2'));

					$data['currency_code'] = $this->session->data['currency'];
					if(isset($this->request->post['aridius_mob_menu'])) {
					$this->load->model('localisation/currency');
					$data['currencies'] = array();
					$results = $this->model_localisation_currency->getCurrencies();
					foreach ($results as $result) {
					if ($result['status']) {
						$data['currencies'][] = array(
							'title'        => $result['title'],
							'code'         => $result['code'],
							'symbol_left'  => $result['symbol_left'],
							'symbol_right' => $result['symbol_right']
						);
					}
				}
					$data['language_code'] = $this->session->data['language'];

					$this->load->model('localisation/language');
					$data['languages'] = array();
					$results = $this->model_localisation_language->getLanguages();
					foreach ($results as $result) {
						if ($result['status']) {
							$data['languages'][] = array(
								'name' => mb_substr($result['name'],0,2,'UTF-8'),
								'code' => $result['code']
							);
						}
					}
					
					$data['firstmame_cost'] = $this->customer->getFirstName();
					$data['firstmame_cost2'] = mb_substr($this->customer->getFirstName(), 0, 1) ;
					$data['lastname_cost'] = $this->customer->getLastName();	
					$data['email_cost'] = $this->customer->getEmail();		
		
			    }

				if(isset($this->request->post['location'])) {
					$data['location_mmenu'] = $this->request->post['location'];
				}

					$this->load->model('tool/image');
					$this->load->model('catalog/information');
					$this->load->language('common/footer');
					$this->load->model('catalog/manufacturer');
					
					$data['informations'] = array();
					foreach ($this->model_catalog_information->getInformations() as $result) {
						if ($result['bottom']) {
							$data['informations'][] = array(
								'title' => $result['title'],
								'href'  => $this->url->link('information/information', 'information_id=' . $result['information_id'])
							);
						}
					}

					// For page specific css
					if (isset($this->request->get['route'])) {
						if (isset($this->request->get['product_id'])) {
							$class = '-' . $this->request->get['product_id'];
						} elseif (isset($this->request->get['path'])) {
							$class = '-' . $this->request->get['path'];
						} elseif (isset($this->request->get['manufacturer_id'])) {
							$class = '-' . $this->request->get['manufacturer_id'];
						} elseif (isset($this->request->get['information_id'])) {
							$class = '-' . $this->request->get['information_id'];
						} else {
							$class = '';
						}
						$data['class'] = str_replace('/', '-', $this->request->get['route']) . $class;
					} else {
						$data['class'] = 'common-home';
					}
      ]]></add>
</operation> 
<operation>
      <search><![CDATA[
					foreach ($children as $child) {
      ]]></search>
      <add position="after"><![CDATA[
					$children_lv3_data = array();
					$children_lv3 = $this->model_catalog_category->getCategories($child['category_id']);
					foreach ($children_lv3 as $child_lv3) {
					$filter_data_lv3 = array(
					'filter_category_id'  => $child_lv3['category_id'],
					'filter_sub_category' => true
					);		
					$children_lv3_data[] = array(
					'name'  => $child_lv3['name'] . ($this->config->get('config_product_count') ? ' (' . $this->model_catalog_product->getTotalProducts($filter_data_lv3) . ')' : ''),
					'href'  => $this->url->link('product/category', 'path=' . $category['category_id'] . '_' . $child['category_id'] . '_' . $child_lv3['category_id'])
					);
					}	
					if ($child['image']) {
					$img_lv2 = $this->model_tool_image->resize($child['image'],$this->config->get('theme_deluxe_photos_menu_width'), $this->config->get('theme_deluxe_photos_menu_height'));
					} else {		
					$img_lv2 = '';
					};
					if ($child['image_menu_ico']) {
		            $image_menu_ico_lv2 = $this->model_tool_image->resize($child['image_menu_ico'],22, 22);
		            } else {		
		            $image_menu_ico_lv2 = '';
		            };
      ]]></add>
</operation>
<!-- stickers/menu -->	
<operation>
      <search><![CDATA[
					'name'  => $child['name'] . ($this->config->get('config_product_count') ? ' (' . $this->model_catalog_product->getTotalProducts($filter_data) . ')' : ''),
      ]]></search>
      <add position="after"><![CDATA[
	                'stickers'     => $child['stickers'],
					'children_lv3' => $children_lv3_data,
		            'column'   => $child['column'] ? $child['column'] : 1,
		            'image2' => $img_lv2,
					'image_menu_ico2'     => $image_menu_ico_lv2,
	             
      ]]></add>
</operation>	
<!-- activetopmenu -->
<operation>
      <search><![CDATA[
					$data['categories'][] = array(
      ]]></search>
      <add position="after"><![CDATA[
					'top'     => $category['top'],
					'category_id' => $category['category_id'],
      ]]></add>
</operation>	
<!-- 3_lv END -->

<operation>
      <search><![CDATA[
					if ($category['top']) {
      ]]></search>
      <add position="replace"><![CDATA[
					if ($category['status']) {
      ]]></add>
</operation>	

<!-- activetopmenu -->
<operation>
      <search><![CDATA[
					$data['categories'][] = array(
      ]]></search>
      <add position="before"><![CDATA[
					if (isset($this->request->get['path'])) {
						$parts = explode('_', (string)$this->request->get['path']);
					} else {
						$parts = array();
					}
					if (isset($parts[0])) {
						$data['category_id'] = $parts[0];
					} else {
						$data['category_id'] = 0;
			        }
      ]]></add>
</operation>
<!-- menu img left -->
<operation>
      <search><![CDATA[
			       foreach ($categories as $category) {
      ]]></search>
      <add position="after"><![CDATA[
					if ($category['image']) {
					$image_main = $this->model_tool_image->resize($category['image'],$this->config->get('theme_deluxe_photos_width_image_main'), $this->config->get('theme_deluxe_photos_height_image_main'));
					} else {		
					$image_main = '';
					};

					if ($category['image_menu_ico']) {
					$image_menu_icol = $this->model_tool_image->resize($category['image_menu_ico'],22, 22);
					} else {		
					$image_menu_icol = '';
					};
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
			        'category_id' => $category['category_id'],
      ]]></search>
      <add position="after"><![CDATA[
			        'image_main' => $image_main,
				
					'image_menu_icol' => $image_menu_icol,
			       
      ]]></add>
</operation>
<!-- stickers -->
 <operation>
      <search><![CDATA[
					'name'     => $category['name'],
      ]]></search>
      <add position="after"><![CDATA[
					'stickers'     => $category['stickers'],	
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$this->load->model('catalog/product');
      ]]></search>
      <add position="after"><![CDATA[
	  	if ($this->request->server['HTTPS']) {
			$server = $this->config->get('config_ssl');
		} else {
			$server = $this->config->get('config_url');
		}
		if (is_file(DIR_IMAGE . $this->config->get('config_logo'))) {
			$data['logo'] = $server . 'image/' . $this->config->get('config_logo');
		} else {
			$data['logo'] = '';
		}  
        $data['home'] = $this->url->link('common/home');
		$host = isset($this->request->server['HTTPS']) && (($this->request->server['HTTPS'] == 'on') || ($this->request->server['HTTPS'] == '1')) ? HTTPS_SERVER : HTTP_SERVER;
		if ($this->request->server['REQUEST_URI'] == '/') {
			$data['og_url'] = $this->url->link('common/home');
		} else {
			$data['og_url'] = $host . substr($this->request->server['REQUEST_URI'], 1, (strlen($this->request->server['REQUEST_URI'])-1));
		}
		
		$data['text_compare'] = sprintf($this->language->get('text_compare'), (isset($this->session->data['compare']) ? count($this->session->data['compare']) : 0));	
		
		if ($this->customer->isLogged()) {
			$this->load->model('account/wishlist');

			$data['text_wishlist'] = sprintf($this->language->get('text_wishlist'), $this->model_account_wishlist->getTotalWishlist());
		} else {
			$data['text_wishlist'] = sprintf($this->language->get('text_wishlist'), (isset($this->session->data['wishlist']) ? count($this->session->data['wishlist']) : 0));
		}
      ]]></add>
</operation>
<operation>
<search><![CDATA[
			return $this->load->view('common/menu', $data);
      ]]></search>
	  <add position="replace"><![CDATA[	 
            $theme_deluxe_header_var = $this->config->get('theme_deluxe_header_var');	  
			if(isset($this->request->post['location'])) {
				$data['location_mmenu'] = $this->request->post['location'];
			}
            if ($theme_deluxe_header_var ==2 || $theme_deluxe_header_var ==3) {			
			if(isset($this->request->post['aridius_mob_menu'])) {
				$this->response->setOutput($this->load->view('common/aridius_mob_menu', $data));
				} else {
				return $this->load->view('common/menu2', $data);
			}
            } else {			
			if(isset($this->request->post['aridius_mob_menu'])) {
				$this->response->setOutput($this->load->view('common/aridius_mob_menu', $data));
				} else {
				return $this->load->view('common/menu', $data);
			    }			
            };			
			
	]]></add>
</operation>
<operation>
<search><![CDATA[
			return $this->load->view('common/menu', $data);
      ]]></search>
	  <add position="replace"><![CDATA[	 


			if(isset($this->request->post['aridius_mob_menu'])) {
				$this->response->setOutput($this->load->view('common/aridius_mob_menu', $data));
				} else {
				return $this->load->view('common/menu', $data);
			} 
	]]></add>
</operation>
</file>

<file path="catalog/controller/information/contact.php">
<!-- new_positions -->
<operation>
      <search><![CDATA[
					$data['comment'] = $this->config->get('config_comment');
      ]]></search>
      <add position="after"><![CDATA[
	  	       $data['language_id'] = $this->config->get('config_language_id');

					$deluxe_top_links3 = $this->config->get('theme_deluxe_top_links3');
					$data['theme_tells'] = array();
					if(isset($deluxe_top_links3) && is_array($deluxe_top_links3)) foreach ($deluxe_top_links3 as $theme_tells) {
						$data['theme_tells'][] = array(
								'title' 			=> html_entity_decode($theme_tells['title'][$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8'),
								'title2' 			=> str_replace(array('(', ')', ' ', '-'), '', $theme_tells['title'][$this->config->get('config_language_id')] ),
		                         'image' 			=> $this->model_tool_image->resize($theme_tells['image'],18, 18),
						);
					 }

					$data['deluxe_telephone_mainheader'] = $this->config->get('theme_deluxe_telephone_mainheader');
					$data['deluxe_telephone_mainheader2'] = str_replace(array('(', ')', ' ', '-'), '', $this->config->get('theme_deluxe_telephone_mainheader'));
					$data['deluxe_telephone_mainheadern2'] = $this->config->get('theme_deluxe_telephone_mainheader2');
					$data['deluxe_telephone_mainheader2n2'] = str_replace(array('(', ')', ' ', '-'), '', $this->config->get('theme_deluxe_telephone_mainheader2'));
					$data['deluxe_time_footer'] = $this->config->get('theme_deluxe_time_footer');
					$data['deluxe_mail_footer'] = $this->config->get('theme_deluxe_mail_footer');
					$data['deluxe_address_footer'] = $this->config->get('theme_deluxe_address_footer');
					$data['deluxe_mail_header'] = $this->config->get('theme_deluxe_mail_header');
					$data['deluxe_address'] = html_entity_decode ($this->config->get('theme_deluxe_address')[$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8');
					$data['deluxe_work_time'] = $this->config->get('theme_deluxe_work_time')[$this->config->get('config_language_id')];  
	                $data['deluxe_work_time1'] = $this->config->get('theme_deluxe_work_time1')[$this->config->get('config_language_id')];  
	                $data['deluxe_work_time2'] = $this->config->get('theme_deluxe_work_time2')[$this->config->get('config_language_id')];

					$mapcode = str_replace("<iframe", "<iframe class=\"lazyload\" style=\"width:100%; height: 330px;border:0;\"", html_entity_decode ($this->config->get('theme_deluxe_mapcode')[$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8'));
					$mapcode = str_replace("frameborder=\"0\" style=\"border:0\"", "", $mapcode);
					$data['deluxe_mapcode'] = str_replace("src", "data-src", $mapcode);	
					
					$data['deluxe_contact_map'] = $this->config->get('theme_deluxe_contact_map');
                
      ]]></add>
</operation>
<!-- new_positions END -->	
</file>	
<file path="catalog/controller/common/home.php">
<!-- new_positions -->
<operation>
      <search><![CDATA[
					$data['header'] = $this->load->controller('common/header');
      ]]></search>
      <add position="after"><![CDATA[
	
					$data['content_top1'] =  $this->load->controller('common/content_top1');
                    $data['content_top2'] =  $this->load->controller('common/content_top2');
                    $data['content_bot1'] =  $this->load->controller('common/content_bot1');
                    $data['content_bot2'] =  $this->load->controller('common/content_bot2');
                    $data['content_bot3'] =  $this->load->controller('common/content_bot3');
                    $data['content_fluid'] =  $this->load->controller('common/content_fluid');
                    $data['content_slleft'] =  $this->load->controller('common/content_slleft');
                    $data['content_slrig1'] =  $this->load->controller('common/content_slrig1');
                    $data['content_slrig2'] =  $this->load->controller('common/content_slrig2');
					$data['deluxe_banners'] = $this->config->get('deluxe_banners');
                    $data['deluxe_banners_hiddensm'] = $this->config->get('theme_deluxe_banners_hiddensm');	
                
      ]]></add>
</operation>
<!-- new_positions END -->	
</file>	
<file path="catalog/controller/product/category.php">
<operation>
      <search><![CDATA[
					$this->load->language('product/category');
      ]]></search>
      <add position="after"><![CDATA[
				    $this->load->language('extension/module/deluxe');
      ]]></add>
</operation>
<!-- categories_2lv image  -->
<operation>
      <search><![CDATA[
					$data['categories'][] = array(
      ]]></search>
      <add position="before"><![CDATA[
					if ($result['image']) {
						$image = $this->model_tool_image->resize($result['image'], $this->config->get('theme_deluxe_categories_2lv_width'), $this->config->get('theme_deluxe_categories_2lv_height'));
					} else {
						$image = '';
					}
      ]]></add>
</operation>
<!-- categories_2lv image  -->
<operation>
      <search><![CDATA[
					'name' => $result['name'] . ($this->config->get('config_product_count') ? ' (' . $this->model_catalog_product->getTotalProducts($filter_data) . ')' : ''),
      ]]></search>
      <add position="after"><![CDATA[
                    'thumb' => $image,
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$this->load->model('tool/image');
      ]]></search>
      <add position="after"><![CDATA[
	  	       $data['language_id'] = $this->config->get('config_language_id');

			   		$this->load->language('extension/module/deluxe');
                    $data['deluxe_categories_2lv'] = $this->config->get('theme_deluxe_categories_2lv');
					$data['deluxe_categories_2lvshow'] = $this->config->get('theme_deluxe_categories_2lvshow');
					$data['deluxe_sort_cat'] = $this->config->get('theme_deluxe_sort_cat');
					$data['deluxe_count_cat'] = $this->config->get('theme_deluxe_count_cat');
					$data['deluxe_description_top_or_bot'] = $this->config->get('theme_deluxe_description_top_or_bot');
					$data['deluxe_wishlist_cat'] = $this->config->get('theme_deluxe_wishlist_cat');
	                $data['deluxe_compare_cat'] = $this->config->get('theme_deluxe_compare_cat');
					$data['deluxe_rating_cat'] = $this->config->get('theme_deluxe_rating_cat');
					$data['deluxe_name_sticker_product_new'] = $this->config->get('theme_deluxe_name_sticker_product_new');
					$data['deluxe_name_sticker_product_top'] = $this->config->get('theme_deluxe_name_sticker_product_top');		
					$data['deluxe_sticker_sale_product_auto'] = $this->config->get('theme_deluxe_sticker_sale_product_auto');	
					$data['deluxe_sticker_new_product_auto'] = $this->config->get('theme_deluxe_sticker_new_product_auto');
					$data['deluxe_sticker_product_new_day'] = $this->config->get('theme_deluxe_sticker_product_new_day');
					$data['deluxe_sticker_product_top_rating'] = $this->config->get('theme_deluxe_sticker_product_top_rating');
					$data['deluxe_sticker_product_top_viewed'] = $this->config->get('theme_deluxe_sticker_product_top_viewed');
					$data['deluxe_sticker_product_top_ratinr'] = $this->config->get('theme_deluxe_sticker_product_top_ratinr');
					$data['deluxe_sticker_top_product_auto'] = $this->config->get('theme_deluxe_sticker_top_product_auto');
					$data['deluxe_limit_symbolst'] = $this->config->get('theme_deluxe_limit_symbolst');
					$data['deluxe_description_length'] = $this->config->get('theme_deluxe_description_length');
					$data['deluxe_description_cat'] = $this->config->get('theme_deluxe_description_cat');
					$data['deluxe_limit_atr'] = $this->config->get('theme_deluxe_limit_atr');
					$data['deluxe_categories_limit'] = $this->config->get('theme_deluxe_categories_limit');
					$data['deluxe_categories_img'] = $this->config->get('theme_deluxe_categories_img');
					$data['deluxe_description_catsm'] = $this->config->get('theme_deluxe_description_catsm');
					$data['deluxe_atr_catsm'] = $this->config->get('theme_deluxe_atr_catsm');
					$data['deluxe_description_pg1'] = $this->config->get('theme_deluxe_description_pg1');
					$data['deluxe_showmore'] = $this->config->get('theme_deluxe_showmore');
					$data['deluxe_lazy'] = $this->config->get('theme_deluxe_lazy');
					$data['deluxe_forder'] = $this->config->get('theme_deluxe_forder');
					$data['deluxe_options_prise_cat'] = $this->config->get('theme_deluxe_options_prise_cat');
					$data['deluxe_img_additional'] = $this->config->get('theme_deluxe_img_additional');
					$data['autocalc_select_first'] = $this->config->get('config_autocalc_select_first');
					$data['deluxe_categories_2lv_width'] = $this->config->get('theme_deluxe_categories_2lv_width');
					$data['deluxe_categories_2lv_height'] = $this->config->get('theme_deluxe_categories_2lv_height');
					$data['deluxe_image_product_width'] = $this->config->get('theme_deluxe_image_product_width');
					$data['deluxe_image_product_height'] = $this->config->get('theme_deluxe_image_product_height');
					$data['aridius_qckview_status'] = $this->config->get('module_aridius_qckview_status');					
					$data['aridiusinstock_status'] = $this->config->get('module_aridiusinstock_status');					

      ]]></add>
</operation>
<!-- sort -->
<operation>
      <search><![CDATA[
					$sort = 'p.sort_order';
      ]]></search>
      <add position="replace"><![CDATA[
                    $sort = $this->config->get('theme_deluxe_sort');
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$order = 'ASC';
      ]]></search>
      <add position="replace"><![CDATA[
                    if ($this->config->get('theme_deluxe_sort_form') == 0) { 
					$order = 'ASC';
					} else {
					$order = 'DESC';
					}
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['products'][] = array(
      ]]></search>
      <add position="before"><![CDATA[
	                $deluxe_img_additional = $this->config->get('theme_deluxe_img_additional');
					$deluxe_img_additional_q = $this->config->get('theme_deluxe_img_additional_q');
	                if ($deluxe_img_additional !=1) {
					  $results_img = $this->model_catalog_product->getProductImages($result['product_id']);
					  $img_hover = array();
					  $ig = 1;
					  foreach ($results_img as $result_img) {
					  $ig++;
					  if($ig >$deluxe_img_additional_q) break;
						if ($result_img['image']) {
							$imgage_hover = $this->model_tool_image->resize($result_img['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height'));
						} else {
							$imgage_hover = false;
						}
						$img_hover[] = $imgage_hover;
					
					  }		  
	                } else {
						$img_hover = false;
					}
					
					$data['deluxe_options_prise'] = $this->config->get('theme_deluxe_options_prise');
					$check_options = array();
					$check_options = $this->config->get('theme_deluxe_options');
					
					$options = array();
					foreach ($this->model_catalog_product->getProductOptions($result['product_id']) as $option) {
                    $product_option_value_data = array();
                    foreach ($option['product_option_value'] as $option_value) {
                        if (!$option_value['subtract'] || ($option_value['quantity'] > 0)) {
                            if ((($this->config->get('config_customer_price') && $this->customer->isLogged()) || !$this->config->get('config_customer_price')) && (float) $option_value['price']) {
                                $options_price   = $this->currency->format($this->tax->calculate($option_value['price'], $result['tax_class_id'], $this->config->get('config_tax') ? 'P' : false), $this->session->data['currency']);
                                $options_price_n = ($this->tax->calculate($option_value['price'], $result['tax_class_id'], $this->config->get('config_tax') ? 'P' : false));
                            } else {
                                $options_price   = false;
                                $options_price_n = false;
                            }
                            if (isset($check_options) && (in_array($option['option_id'], $check_options))) {
                                $product_option_value_data[] = array(
                                    'product_option_value_id' => $option_value['product_option_value_id'],
                                    'option_value_id' => $option_value['option_value_id'],
                                    'name' => $option_value['name'],
                                    'image_opt' => $option_value['image_opt'] ? $this->model_tool_image->resize($option_value['image_opt'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height')) : '',
                                    'image' => $option_value['image'] ? $this->model_tool_image->resize($option_value['image'], $this->config->get('theme_deluxe_product_optionimg_width_cat'), $this->config->get('theme_deluxe_product_optionimg_height_cat')) : '',
                                    'price' => $options_price,
                                    'price_n' => $options_price_n,
                                    'opt_thumb' => $this->model_tool_image->resize($option_value['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height')),
                                    'price_prefix' => $option_value['price_prefix']
                                );
                            }
                        }
                    }
                    if (isset($check_options) && (in_array($option['option_id'], $check_options))) {
                        $options[] = array(
                            'product_option_id' => $option['product_option_id'],
                            'product_option_value' => $product_option_value_data,
                            'option_id' => $option['option_id'],
                            'name' => $option['name'],
                            'type' => $option['type'],
                            'value' => $option['value'],
                            'required' => $option['required']
                         );
                     }
                   }
				
				   $check_attributes= array();
				   $check_attributes = $this->config->get('theme_deluxe_attribute');		
				  
 				   $attribute_cat = array();	

				   foreach ($this->model_catalog_product->getProductAttributes($result['product_id']) as $attribute_groupp) {
				 
					  foreach ($attribute_groupp['attribute'] as $attribute) {
						if (isset($check_attributes) && (in_array($attribute['attribute_id'], $check_attributes ))) {						
							$attribute_cat[] = array(
							'attribute_id' => $attribute['attribute_id'],
								'name'    => $attribute['name'],
								'text'    => $attribute['text'],
						   );				
						 }	
					   }
					}
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['products'][] = array(
      ]]></search>
      <add position="after"><![CDATA[
	                'reviews' => $result['reviews'],
	                'img_hover' => $img_hover,
					'price_no_format' => $result['price'],
					'special_no_format' => $result['special'],	
					'price_calck'       => $price_calck,
					'special_calck'     => $special_calck,					
					'min_quantity'	=> $result['minimum'],
					'price_value'   => $result['price'],
					'special_value' => $result['special'],
					'dateadded'  => $result['date_added'],
					'viewed'     => $result['viewed'],
					'rating'     => $result['rating'],
					'attribute_cat' => $attribute_cat,	
					'options' => $options,
			        'stickers2' => $this->model_catalog_product->getProductStickerProductId($result['product_id']),	
					'quantity'   => $result['quantity'],	
					'price_sticker'        => $result['price'],
					'special_sticker'      => (isset($result['special']) ? $result['special'] : false),	
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['sort'] = $sort;
      ]]></search>
      <add position="before"><![CDATA[
                    $data['page'] = $page;
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$price = $this->currency->format($this->tax->calculate($result['price'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);
      ]]></search>
      <add position="after"><![CDATA[
                    $price_calck = ($this->tax->calculate($result['price'], $result['tax_class_id'], $this->config->get('config_tax')));
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$price = false;
      ]]></search>
      <add position="after"><![CDATA[
                    $price_calck = false;
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$special = $this->currency->format($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);
      ]]></search>
      <add position="after"><![CDATA[
                    $special_calck = ($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')));
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$special = false;
      ]]></search>
      <add position="after"><![CDATA[
                    $special_calck = false;
      ]]></add>
</operation>
</file>
<file path="catalog/model/catalog/review.php">
<operation>
      <search><![CDATA[
					public function getTotalReviewsByProductId($product_id) {
      ]]></search>
      <add position="before"><![CDATA[
        public function getTotalReviewAverage($product_id) {
        $query = $this->db->query("SELECT AVG(rating) AS OrderAverage FROM " . DB_PREFIX . "review r LEFT JOIN " . DB_PREFIX . "product p ON (r.product_id = p.product_id) LEFT JOIN " . DB_PREFIX . "product_description pd ON (p.product_id = pd.product_id) WHERE p.product_id = '" . (int)$product_id . "' AND p.date_available <= NOW() AND p.status = '1' AND r.status = '1' AND pd.language_id = '" . (int)$this->config->get('config_language_id') . "'");
        return $query->row['OrderAverage'];
    }
      ]]></add>
</operation>
</file>
<file path="catalog/controller/product/product.php">
<operation>
      <search><![CDATA[
					$data['reviews'] = sprintf($this->language->get('text_reviews'), (int)$product_info['reviews']);
      ]]></search>
      <add position="after"><![CDATA[
				     $data['sh_reviews'] = sprintf((int)$product_info['reviews']);
		]]></add>
</operation>
<operation>
      <search><![CDATA[
					$discounts = $this->model_catalog_product->getProductDiscounts($this->request->get['product_id']);
      ]]></search>
      <add position="before"><![CDATA[
					if ((float)$product_info['special']) {
                    $data['sh_price'] = rtrim(preg_replace("/[^0-9\.]/", "", ($this->currency->format($this->tax->calculate($product_info['special'], $product_info['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']))), '.'); 
                    } else { 
                    $data['sh_price'] = rtrim(preg_replace("/[^0-9\.]/", "", ($this->currency->format($this->tax->calculate($product_info['price'], $product_info['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']))), '.'); 
                    }
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$this->load->language('product/product');
      ]]></search>
      <add position="after"><![CDATA[
				    $this->load->language('extension/module/deluxe');
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$this->load->model('tool/image');
      ]]></search>
      <add position="after"><![CDATA[
               $data['language_id'] = $this->config->get('config_language_id');
			   $data['config_minify'] = $this->config->get('config_minify');
			  
			        $data['aridius_infoblock'] = $this->load->controller('extension/module/aridius_infoblock');
			        $data['deluxe_elevatezoom'] = $this->config->get('theme_deluxe_elevatezoom');
					$manufacturer_dta = $this->model_catalog_manufacturer->getManufacturer($product_info['manufacturer_id']);
                       if(isset($manufacturer_dta['image']) && file_exists(DIR_IMAGE.$manufacturer_dta['image']))
                    {
                       $manufacturer_img = $this->model_tool_image->resize($manufacturer_dta['image'], $this->config->get('theme_deluxe_product_man_width'), $this->config->get('theme_deluxe_product_man_height'));
                       $data['manufacturer_img'] = $manufacturer_img;
                    }
                    $data['deluxe_minify'] = $this->config->get('theme_deluxe_minify');
		            $data['deluxe_product_man_img'] = $this->config->get('theme_deluxe_product_man_img');
					$data['deluxe_product_timer'] = $this->config->get('theme_deluxe_product_timer');
					$data['deluxe_product_sticky_menu'] = $this->config->get('theme_deluxe_product_sticky_menu');
					$data['deluxe_product_show_share'] = $this->config->get('theme_deluxe_product_show_share');
					$data['deluxe_product_show_sku']  = $this->config->get('theme_deluxe_product_show_sku');
					$data['deluxe_product_show_upc']  = $this->config->get('theme_deluxe_product_show_upc');
					$data['deluxe_product_show_ean']  = $this->config->get('theme_deluxe_product_show_ean');
					$data['deluxe_product_show_jan']  = $this->config->get('theme_deluxe_product_show_jan');
					$data['deluxe_product_show_isbn'] = $this->config->get('theme_deluxe_product_show_isbn');
					$data['deluxe_product_show_mpn']  = $this->config->get('theme_deluxe_product_show_mpn');
					$data['deluxe_product_sku']  = $this->config->get('theme_deluxe_product_sku');
					$data['deluxe_product_upc']  = $this->config->get('theme_deluxe_product_upc');
					$data['deluxe_product_ean']  = $this->config->get('theme_deluxe_product_ean');
					$data['deluxe_product_jan']  = $this->config->get('theme_deluxe_product_jan');
					$data['deluxe_product_isbn'] = $this->config->get('theme_deluxe_product_isbn');
					$data['deluxe_product_mpn']  = $this->config->get('theme_deluxe_product_mpn');
					$data['deluxe_show_attribute']  = $this->config->get('theme_deluxe_show_attribute');
					$data['deluxe_attribute_see']  = $this->config->get('theme_deluxe_attribute_see');
					$data['deluxe_pr_attribute_seeall']  = $this->config->get('theme_deluxe_pr_attribute_seeall');
					$data['deluxe_attribute_line'] = $this->config->get('theme_deluxe_attribute_line');
					
					$deluxe_top_links7 = $this->config->get('theme_deluxe_top_links7');
					$data['theme_tabs'] = array();
					if(isset($deluxe_top_links7) && is_array($deluxe_top_links7)) foreach ($deluxe_top_links7 as $theme_tabs) {
						$data['theme_tabs'][] = array(
								'title' 			=> $theme_tabs['title'],
								'description' 		=> html_entity_decode($theme_tabs['description'][$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8')
						);
					 }
					
					$top_links9 = $this->config->get('theme_deluxe_top_links9');
					$data['deluxe_top_links9'] = array();
			        if(isset($top_links9) && is_array($top_links9)) foreach ($top_links9 as $top_link9) {
					if ($top_link9['image'] && is_file(DIR_IMAGE . $top_link9['image'])) {
						$deluxe_block_prod = $this->model_tool_image->resize($top_link9['image'], 100, 100);
					} else {
						$deluxe_block_prod = $this->model_tool_image->resize('no_image.png', 100, 100);
					}
					$data['deluxe_top_links9'][] = array(
						'description' => $top_link9['description'],
						'title' => $top_link9['title'],
						'image' 			=> $this->model_tool_image->resize($top_link9['image'],38, 38),
						'image_href'  => $deluxe_block_prod
					  );
				    }
					
					$data['deluxe_name_sticker_product_new'] = $this->config->get('theme_deluxe_name_sticker_product_new');
					$data['deluxe_name_sticker_product_top'] = $this->config->get('theme_deluxe_name_sticker_product_top');		
					$data['deluxe_sticker_sale_product_auto'] = $this->config->get('theme_deluxe_sticker_sale_product_auto');	
					$data['deluxe_sticker_new_product_auto'] = $this->config->get('theme_deluxe_sticker_new_product_auto');
					$data['deluxe_sticker_product_new_day'] = $this->config->get('theme_deluxe_sticker_product_new_day');
					$data['deluxe_sticker_product_top_rating'] = $this->config->get('theme_deluxe_sticker_product_top_rating');
					$data['deluxe_sticker_product_top_viewed'] = $this->config->get('theme_deluxe_sticker_product_top_viewed');
					$data['deluxe_sticker_product_top_ratinr'] = $this->config->get('theme_deluxe_sticker_product_top_ratinr');
					$data['deluxe_sticker_top_product_auto'] = $this->config->get('theme_deluxe_sticker_top_product_auto');
					$data['deluxe_description_cat'] = $this->config->get('theme_deluxe_description_cat');
					$data['deluxe_limit_symbolst'] = $this->config->get('theme_deluxe_limit_symbolst');
					$data['deluxe_rating_cat'] = $this->config->get('theme_deluxe_rating_cat');
					$data['deluxe_wishlist_cat'] = $this->config->get('theme_deluxe_wishlist_cat');
	                $data['deluxe_compare_cat'] = $this->config->get('theme_deluxe_compare_cat');
				
					$data['deluxe_share'] = $this->config->get('theme_deluxe_share');
					$data['deluxe_product_raiting'] = $this->config->get('theme_deluxe_product_raiting');
					$data['deluxe_product_size'] = $this->config->get('theme_deluxe_product_size');
					$data['deluxe_product_stock'] = $this->config->get('theme_deluxe_product_stock');
					$data['deluxe_st_cart'] = $this->config->get('theme_deluxe_st_cart');
					$data['deluxe_short_desc'] = $this->config->get('theme_deluxe_short_desc');
					$data['deluxe_img_colleft'] = $this->config->get('theme_deluxe_img_colleft');
					$data['deluxe_product_weight'] = $this->config->get('theme_deluxe_product_weight');
					$data['deluxe_product_kod_tovara'] = $this->config->get('theme_deluxe_product_kod_tovara');
					$data['deluxe_options_mainimg'] = $this->config->get('theme_deluxe_options_mainimg');
					$data['deluxe_options_prise'] = $this->config->get('theme_deluxe_options_prise');
					$data['deluxe_relpr_tab'] = $this->config->get('theme_deluxe_relpr_tab');
					$data['deluxe_limit_atr'] = $this->config->get('theme_deluxe_limit_atr');
					$data['deluxe_ratpr'] = $this->config->get('theme_deluxe_ratpr');
					$data['deluxe_wishpr'] = $this->config->get('theme_deluxe_wishpr');
					$data['deluxe_comppr'] = $this->config->get('theme_deluxe_comppr');
					$data['deluxe_quickviewpr'] = $this->config->get('theme_deluxe_quickviewpr');
					$data['deluxe_relnavigation'] = $this->config->get('theme_deluxe_relnavigation');					
					$data['deluxe_relautoplay_on'] = $this->config->get('theme_deluxe_relautoplay_on');					
					$data['deluxe_relautoplay'] = $this->config->get('theme_deluxe_relautoplay');					
					$data['deluxe_relitems'] = $this->config->get('theme_deluxe_relitems');					
					$data['deluxe_relrew_speed'] = $this->config->get('theme_deluxe_relrew_speed');					
					$data['deluxe_relstophover'] = $this->config->get('theme_deluxe_relstophover');		
		            $data['deluxe_show_saving'] = $this->config->get('theme_deluxe_show_saving');
		            $data['deluxe_show_stsale'] = $this->config->get('theme_deluxe_show_stsale');	
	                $data['deluxe_imageadd_hover'] = $this->config->get('theme_deluxe_imageadd_hover');
	                $data['deluxe_imageadd_nav'] = $this->config->get('theme_deluxe_imageadd_nav');
	                $data['deluxe_imageadd_vertical'] = $this->config->get('theme_deluxe_imageadd_vertical');
	                $data['deluxe_rating_pr'] = $this->config->get('theme_deluxe_rating_pr');
	                $data['deluxe_man'] = $this->config->get('theme_deluxe_man');
					$data['config_stock'] = $this->config->get('config_stock_checkout');
					$data['deluxe_forder'] = $this->config->get('theme_deluxe_forder');
					$data['deluxe_lazy'] = $this->config->get('theme_deluxe_lazy');
					$data['deluxe_image_related_width'] = $this->config->get('theme_deluxe_image_related_width');
					$data['deluxe_image_related_height'] = $this->config->get('theme_deluxe_image_related_height');
					$data['deluxe_size_option'] = $this->config->get('theme_deluxe_size_option');
					$data['deluxe_image_additional_width'] = $this->config->get('theme_deluxe_image_additional_width');
					$data['deluxe_image_additional_height'] = $this->config->get('theme_deluxe_image_additional_height');
		            $data['deluxe_image_thumb_width'] = $this->config->get('theme_deluxe_image_thumb_width');
					$data['deluxe_image_thumb_height'] = $this->config->get('theme_deluxe_image_thumb_height');	
					$data['deluxe_image_popup_width'] = $this->config->get('theme_' . $this->config->get('config_theme') . '_image_popup_width');
					$data['deluxe_image_popup_height'] = $this->config->get('theme_' . $this->config->get('config_theme') . '_image_popup_height');	
	                $data['aridius_qckview_status'] = $this->config->get('module_aridius_qckview_status');					
					$data['aridiusinstock_status'] = $this->config->get('module_aridiusinstock_status');
					
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$this->response->setOutput($this->load->view('product/product', $data));
      ]]></search>
      <add position="before"><![CDATA[
					    if(isset($this->request->post['aridius_quickview'])) {
						$data['aridius_qckview_tab_description'] = $this->config->get('module_aridius_qckview_tab_description');
						$data['aridius_qckview_tab_character'] = $this->config->get('module_aridius_qckview_tab_character');
						$data['aridius_qckview_tab_reviews'] = $this->config->get('module_aridius_qckview_tab_reviews');
						$data['aridius_qckview_tab_additional'] = $this->config->get('module_aridius_qckview_tab_additional');
						}
						if(isset($this->request->post['aridius_quickview'])) {
							$data['ard_quckview'] = $this->load->view('product/aridius_quickview', $data);
						} else {
							$data['ard_quckview'] = '';
					    }
      ]]></add>
</operation>
<!-- options img pop up-->
<operation>
      <search><![CDATA[
					'price'                   => $price,
      ]]></search>
      <add position="before"><![CDATA[
                      'popup' => $this->model_tool_image->resize($option_value['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_popup_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_popup_height')),
                      'optthumb' => $this->model_tool_image->resize($option_value['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_thumb_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_thumb_height')),
					  'optthumb2' => $this->model_tool_image->resize($option_value['image'], $this->config->get('theme_deluxe_product_clone_width'), $this->config->get('theme_deluxe_product_clone_height')),
	  ]]></add>
</operation>
<!-- options img size-->
<operation>
      <search><![CDATA[
								'image'                   => $this->model_tool_image->resize($option_value['image'], 50, 50),
      ]]></search>
      <add position="replace"><![CDATA[
                     'image'                  => $option_value['image'] ? $this->model_tool_image->resize($option_value['image'], $this->config->get('theme_deluxe_product_optionimg_width'), $this->config->get('theme_deluxe_product_optionimg_height')) : '',
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					 $data['images'] = array();
      ]]></search>
      <add position="before"><![CDATA[
					if ($product_info['image']) {
						$data['thumb_add'] = $this->model_tool_image->resize($product_info['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_additional_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_additional_height'));
						$this->document->setOgimage($this->model_tool_image->resize($product_info['image'], 600, 315));
					} else {
						$data['thumb_add'] = '';
					}
					if ($product_info['image']) {
						$data['thumb_clone'] = $this->model_tool_image->resize($product_info['image'], $this->config->get('theme_deluxe_product_clone_width'), $this->config->get('theme_deluxe_product_clone_height'));
						$this->document->setOgimage($this->model_tool_image->resize($product_info['image'], 600, 315));
					} else {
						$data['thumb_clone'] = '';
					}
      ]]></add>
</operation>
<!-- elevatezoom-->
<operation>
      <search><![CDATA[
					'popup' => $this->model_tool_image->resize($result['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_popup_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_popup_height')),
      ]]></search>
      <add position="after"><![CDATA[
                    'thumb2' => $this->model_tool_image->resize($result['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_thumb_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_thumb_height')),
      ]]></add>
</operation>
<!-- stickers -->
<operation>
      <search><![CDATA[
					$data['products'][] = array(
      ]]></search>
      <add position="after"><![CDATA[
					'dateadded'       => $result['date_added'],
					'viewed'          => $result['viewed'],
					'rating'          => $result['rating'],
					'attribute' => $this->model_catalog_product->getProductAttributes($result['product_id']),
			        'stickers2' => $this->model_catalog_product->getProductStickerProductId($result['product_id']),
					'quantity'        => $result['quantity'],	
					'reviews' => $result['reviews'],
					'price_sticker'        => $result['price'],
					'special_sticker'      => (isset($result['special']) ? $result['special'] : false),	
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['special'] = $this->currency->format($this->tax->calculate($product_info['special'], $product_info['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);
      ]]></search>
      <add position="after"><![CDATA[
                    $data['saving_product'] = round((($product_info['price'] - $product_info['special']) / $product_info['price']) * 100, 0);
					$this->load->model('catalog/product');	
					$special_info = $this->model_catalog_product->getSpecialDates($product_id);
					if ($special_info) {
						$data['special_date_end'] = $special_info['date_end'];
						$data['special_date_start'] = $special_info['date_start'];
					} else {
						$date['special_date_end'] = false;
						$date['special_date_start'] = false;
					}
      ]]></add>
</operation>
<!-- shema -->
<operation>
      <search><![CDATA[
					if ($this->config->get('config_tax')) {
      ]]></search>
      <add position="before"><![CDATA[
                    $data['sh_currency'] = $this->session->data['currency'];
      ]]></add>
</operation>
<!-- shema end -->
<operation>
      <search><![CDATA[
					$data['rating'] = (int)$product_info['rating'];
      ]]></search>
      <add position="after"><![CDATA[
                    $data['viewed'] = (int)$product_info['viewed'];
			        $data['dateadded'] = $product_info['date_added'];
					$data['quantity'] = $product_info['quantity'];
      ]]></add>
</operation>
<!-- weight/ sku -->
<operation>
      <search><![CDATA[
					$data['points'] = $product_info['points'];
      ]]></search>
      <add position="after"><![CDATA[
                    $data['length'] = number_format($product_info['length'], 0 ,"","").' '.$this->length->getUnit($product_info['length_class_id']);
                    $data['width']  = number_format($product_info['width'], 0 ,"","").' '.$this->length->getUnit($product_info['length_class_id']);
                    $data['height'] = number_format($product_info['height'], 0 ,"","").' '.$this->length->getUnit($product_info['length_class_id']);
                    $data['weight'] = number_format($product_info['weight'], 0 ,"","").' '.$this->weight->getUnit($product_info['weight_class_id']);
                    $data['upc']  = $product_info['upc'];
			        $data['sku']  = $product_info['sku'];
					$data['ean']  = $product_info['ean'];
					$data['jan']  = $product_info['jan'];
					$data['isbn'] = $product_info['isbn'];
					$data['mpn']  = $product_info['mpn'];
      ]]></add>
</operation>
<!-- weight end -->
<!-- Reviews -->
<operation>
      <search><![CDATA[
					$this->load->model('catalog/review');
      ]]></search>
      <add position="after"><![CDATA[
		$review_totalavr = $this->model_catalog_review->getTotalReviewAverage($this->request->get['product_id']);
		$data['rating_avr'] = $review_totalavr;
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['reviews'][] = array(
      ]]></search>
      <add position="after"><![CDATA[
					'parent'     => $parent_qas,
					'dignity'       => nl2br($result['dignity']),
					'limitations'   => nl2br($result['limitations']),
					'sum_likes' => $sum_likes,
					'sum_dislikes' => $sum_dislikes,
                    'check_dislikes' => $this->model_extension_module_aridiuslikes->checkLikes($result['review_id'], $ip, 'dislikes'),
                    'check_likes' => $this->model_extension_module_aridiuslikes->checkLikes($result['review_id'], $ip, 'likes'),
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['reviews'][] = array(
      ]]></search>
      <add position="before"><![CDATA[
					
					$likes = $this->model_extension_module_aridiuslikes->sumLikes($result['review_id']);
                     foreach ($likes as $like) {
                     $sum_likes = $like['SUM(likes)'];
                     $sum_dislikes = $like['SUM(dislikes)'];
                     }
                      $ip = 0;

                    if (!empty($this->request->server['HTTP_X_FORWARDED_FOR'])) {
                        $ip = $this->request->server['HTTP_X_FORWARDED_FOR'];
                     } else if (isset($this->request->server['REMOTE_ADDR'])) {
                        $ip = $this->request->server['REMOTE_ADDR'];
                     }
					 
					$parent = $this->model_catalog_review->getReviewsByProductId($this->request->get['product_id'],0,10,$result['review_id']);
					$parent_qas=array();

					
					foreach($parent as $parents){
					
					$likes2 = $this->model_extension_module_aridiuslikes->sumLikes($parents['review_id']);
                    foreach ($likes2 as $like2) {
                    $sum_likes2 = $like2['SUM(likes)'];
                    $sum_dislikes2 = $like2['SUM(dislikes)'];
                    }					
					
						$parent_qas[] = array(
							'author'     => $parents['author'],
				            'review_id2'  => $parents['review_id'],		
				            'sum_likes2' => $sum_likes2,
				            'sum_dislikes2' => $sum_dislikes2,							
							'review_id'  => $parents['review_id'],
							'text'       => nl2br($parents['text']),
							'rating'     => (int)$parents['rating'],
							'date_added' => date($this->language->get('date_format_short'), strtotime($parents['date_added'])),
							'check_dislikes2' => $this->model_extension_module_aridiuslikes->checkLikes($parents['review_id'], $ip, 'dislikes'),
                            'check_likes2' => $this->model_extension_module_aridiuslikes->checkLikes($parents['review_id'], $ip, 'likes'),
						);
					}	
      ]]></add>
</operation>
<operation>
				<search><![CDATA[
				public function index() {
				]]></search>
				<add position="before"><![CDATA[
				protected function getReviewsFirstPage($product_id) {
					$this->load->language('product/product');
					$this->load->model('catalog/review');
					$this->load->model('extension/module/aridiuslikes');
			
					$page = 1;
					$data['reviews'] = array();
					$review_total = $this->model_catalog_review->getTotalReviewsByProductId($product_id);
					$results = $this->model_catalog_review->getReviewsByProductId($product_id, 0, $review_total);
					foreach ($results as $result) {
					
					$likes = $this->model_extension_module_aridiuslikes->sumLikes($result['review_id']);
                     foreach ($likes as $like) {
                     $sum_likes = $like['SUM(likes)'];
                     $sum_dislikes = $like['SUM(dislikes)'];
                     }
                      $ip = 0;

                    if (!empty($this->request->server['HTTP_X_FORWARDED_FOR'])) {
                        $ip = $this->request->server['HTTP_X_FORWARDED_FOR'];
                     } else if (isset($this->request->server['REMOTE_ADDR'])) {
                        $ip = $this->request->server['REMOTE_ADDR'];
                     }
					 
					$parent = $this->model_catalog_review->getReviewsByProductId($this->request->get['product_id'],0,10,$result['review_id']);
					$parent_qas=array();

					
					foreach($parent as $parents){
					
					$likes2 = $this->model_extension_module_aridiuslikes->sumLikes($parents['review_id']);
                    foreach ($likes2 as $like2) {
                    $sum_likes2 = $like2['SUM(likes)'];
                    $sum_dislikes2 = $like2['SUM(dislikes)'];
                    }					
					
						$parent_qas[] = array(
							'author'     => $parents['author'],
				            'review_id2'  => $parents['review_id'],		
				            'sum_likes2' => $sum_likes2,
				            'sum_dislikes2' => $sum_dislikes2,							
							'review_id'  => $parents['review_id'],
							'text'       => nl2br($parents['text']),
							'rating'     => (int)$parents['rating'],
							'date_added' => date($this->language->get('date_format_short'), strtotime($parents['date_added'])),
							'check_dislikes2' => $this->model_extension_module_aridiuslikes->checkLikes($parents['review_id'], $ip, 'dislikes'),
                            'check_likes2' => $this->model_extension_module_aridiuslikes->checkLikes($parents['review_id'], $ip, 'likes'),
						);
					}					 
					 
					$data['reviews'][] = array(
					        'review_id' => $result['review_id'],
							'author'     => $result['author'],
							'parent'     => $parent_qas,
							'text'       => nl2br($result['text']),
							'rating'     => (int)$result['rating'],
							'dignity'       => nl2br($result['dignity']),
							'limitations'   => nl2br($result['limitations']),
							'date_added' => date($this->language->get('date_format_short'), strtotime($result['date_added'])),
						    'sum_likes' => $sum_likes,
							'sum_dislikes' => $sum_dislikes,
                            'check_dislikes' => $this->model_extension_module_aridiuslikes->checkLikes($result['review_id'], $ip, 'dislikes'),
                            'check_likes' => $this->model_extension_module_aridiuslikes->checkLikes($result['review_id'], $ip, 'likes'),
						);
					}
					$pagination = new Pagination();
					$pagination->total = $review_total;
					$pagination->page = $page;
					$pagination->limit = 5;
					$pagination->url = $this->url->link('product/product/review', 'product_id=' . $product_id . '&page={page}');
					$data['pagination'] = $pagination->render();
					$data['results'] = sprintf($this->language->get('text_pagination'), ($review_total) ? (($page - 1) * 5) + 1 : 0, ((($page - 1) * 5) > ($review_total - 5)) ? $review_total : ((($page - 1) * 5) + 5), $review_total, ceil($review_total / 5));
					return $data;
				}

				]]></add>
</operation>

<operation>
			  <search><![CDATA[
               $data['rating'] = (int)$product_info['rating'];
                ]]></search>
                <add position="after"><![CDATA[
            $this->load->model('catalog/review');
            $review_total = $this->model_catalog_review->getTotalReviewsByProductId($this->request->get['product_id']);
            $results_rews = $this->model_catalog_review->getReviewsByProductId($this->request->get['product_id']);

            $one = 0;
            $two = 0;
            $three = 0;
            $four = 0;
            $five = 0;
            $rating_sum = 0;

            foreach ($results_rews as $results_rew){
			    ($results_rew['rating'] == '1') && $one++;
                ($results_rew['rating'] == '2') && $two++;
                ($results_rew['rating'] == '3') && $three++;
                ($results_rew['rating'] == '4') && $four++;
                ($results_rew['rating'] == '5') && $five++;
            }

	        if ($review_total) {
            $data['stack_rating'][] = array(
                'one' => round((100/$review_total) * $one),
                'two' => round((100/$review_total) * $two),
                'three' => round((100/$review_total) * $three),
                'four' => round((100/$review_total) * $four),
                'five' => round((100/$review_total) * $five),
                'rating' => round($rating_sum / $review_total, 1),
                'total' => $review_total
            );
		    } else {
			    $data['stack_rating'][] = array(
                'one' => $one,
                'two' => $two,
                'three' => $three,
                'four' => $four,
                'five' => $five,
                'total' => $review_total
            );
		  }	
                ]]></add>
</operation>


<operation>
			  <search><![CDATA[
               $data['attribute_groups'] = $this->model_catalog_product->getProductAttributes($this->request->get['product_id']);
                ]]></search>
                <add position="before"><![CDATA[
				$data['hrefs'] = $this->url->link('product/product', $url . '&product_id=' . $this->request->get['product_id']);
				$data['reviews_first'] = $this->getReviewsFirstPage((int)$this->request->get['product_id']);
				$reviews_first = $this->getReviewsFirstPage((int)$this->request->get['product_id']);
				if ( count($reviews_first['reviews']) > 5 ) {
				$data['reviews_first_page'] = array_slice($reviews_first['reviews'], 0, 5);
				} else { $data['reviews_first_page'] = $reviews_first['reviews']; }
                ]]></add>
</operation>
<operation>
			  <search><![CDATA[
                $data['reviews'][] = array(
                ]]></search>
                <add position="after"><![CDATA[
				'review_id' => $result['review_id'],
				'sum_likes' => $sum_likes,
				'sum_dislikes' => $sum_dislikes,
                'check_dislikes' => $this->model_extension_module_aridiuslikes->checkLikes($result['review_id'], $ip, 'dislikes'),
                'check_likes' => $this->model_extension_module_aridiuslikes->checkLikes($result['review_id'], $ip, 'likes'),
                ]]></add>
</operation>
<operation>
			  <search><![CDATA[
                $data['reviews'][] = array(
                ]]></search>
                <add position="before"><![CDATA[
				$likes = $this->model_extension_module_aridiuslikes->sumLikes($result['review_id']);
                foreach ($likes as $like) {
                $sum_likes = $like['SUM(likes)'];
                $sum_dislikes = $like['SUM(dislikes)'];
                }
                $ip = 0;
                if (!empty($this->request->server['HTTP_X_FORWARDED_FOR'])) {
                $ip = $this->request->server['HTTP_X_FORWARDED_FOR'];
                } else if (isset($this->request->server['REMOTE_ADDR'])) {
                $ip = $this->request->server['REMOTE_ADDR'];
                }
                ]]></add>
</operation>
<operation>
			  <search><![CDATA[
                public function review() {
                ]]></search>
                <add position="after"><![CDATA[
                $this->load->model('extension/module/aridiuslikes');
                ]]></add>
</operation>
<!--  Reviews end -->
<operation>
      <search><![CDATA[
					$data['description'] = html_entity_decode($product_info['description'], ENT_QUOTES, 'UTF-8');
      ]]></search>
      <add position="after"><![CDATA[
	                $data['description2'] =	utf8_substr(strip_tags(html_entity_decode($product_info['description'], ENT_QUOTES, 'UTF-8')), 0, $this->config->get('theme_deluxe_chars_desc')) . '..';
      ]]></add>
</operation>
<operation>
			  <search><![CDATA[
                $this->document->addScript('catalog/view/javascript/jquery/magnific/jquery.magnific-popup.min.js');
                ]]></search>
                <add position="replace"><![CDATA[
                ]]></add>
</operation>
<operation>
			  <search><![CDATA[
                $this->document->addStyle('catalog/view/javascript/jquery/magnific/magnific-popup.css');
                ]]></search>
                <add position="replace"><![CDATA[
                ]]></add>
</operation>
</file>	
<file path="catalog/controller/common/footer.php">
<!-- new_positions -->
<operation>
      <search><![CDATA[
				    $data['newsletter'] = $this->url->link('account/newsletter', '', true);
      ]]></search>
      <add position="after"><![CDATA[
					$this->load->language('extension/module/deluxe');	 
					$this->load->model('tool/image');					

	                $data['language_id'] = $this->config->get('config_language_id');
					$data['deluxe_map_links'] = $this->config->get('theme_deluxe_map_links');
					
					$deluxe_map_links2 = $this->config->get('theme_deluxe_map_links');
					$data['deluxe_map_links'] = array();
					if(isset($deluxe_map_links2) && is_array($deluxe_map_links2)) foreach ($deluxe_map_links2 as $deluxe_map_links) {
						$data['deluxe_map_links'][] = array(
								'latitude' 			=> $deluxe_map_links['latitude'],
								'longitude' 		=> $deluxe_map_links['longitude'],
								'title' 		    => html_entity_decode($deluxe_map_links['title'][$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8')
						);
					 }					
					
					$data['deluxe_telephone_mainheader'] = $this->config->get('theme_deluxe_telephone_mainheader');
					$data['deluxe_telephone_mainheader2'] = str_replace(array('(', ')', ' ', '-'), '', $this->config->get('theme_deluxe_telephone_mainheader'));
					$data['deluxe_telephone_mainheadern2'] = $this->config->get('theme_deluxe_telephone_mainheader2');
					$data['deluxe_telephone_mainheader2n2'] = str_replace(array('(', ')', ' ', '-'), '', $this->config->get('theme_deluxe_telephone_mainheader2'));						
					$deluxe_top_links2 = $this->config->get('theme_deluxe_top_links2');
					
					$data['theme_setis'] = array();
					if(isset($deluxe_top_links2) && is_array($deluxe_top_links2)) foreach ($deluxe_top_links2 as $theme_setis) {
						$data['theme_setis'][] = array(
									'image' 			=> $this->model_tool_image->resize($theme_setis['image'],32, 32),
					'link_top' 			=> $theme_setis['link_top'],
						);
					 }	

					$deluxe_top_links0 = $this->config->get('theme_deluxe_top_links0');
					$data['theme_pays'] = array();
					if(isset($deluxe_top_links0) && is_array($deluxe_top_links0)) foreach ($deluxe_top_links0 as $theme_pays) {
						$data['theme_pays'][] = array(
									'image' 			=> $this->model_tool_image->resize($theme_pays['image'],30, 30),
			
						);
					 }	
				
					$data['deluxe_telephoneon_footer'] = $this->config->get('theme_deluxe_telephoneon_footer');	
					$data['deluxe_telephone1on_footer'] = $this->config->get('theme_deluxe_telephone1on_footer');	
					$data['deluxe_telephone2on_footer'] = $this->config->get('theme_deluxe_telephone2on_footer');	
					$data['deluxe_skype_footeron'] = $this->config->get('theme_deluxe_skype_footeron');	
					$data['deluxe_mail_footeron'] = $this->config->get('theme_deluxe_mail_footeron');	
					$data['deluxe_addres_footeron'] = $this->config->get('theme_deluxe_addres_footeron');	
					$data['deluxe_time_footeron'] = $this->config->get('theme_deluxe_time_footeron');	
	                $data['deluxe_work_time'] = $this->config->get('theme_deluxe_work_time')[$this->config->get('config_language_id')];  
	                $data['deluxe_work_time1'] = $this->config->get('theme_deluxe_work_time1')[$this->config->get('config_language_id')];  
	                $data['deluxe_work_time2'] = $this->config->get('theme_deluxe_work_time2')[$this->config->get('config_language_id')];
					$data['deluxe_address'] = html_entity_decode ($this->config->get('theme_deluxe_address')[$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8');
					$data['deluxe_mail_header'] = $this->config->get('theme_deluxe_mail_header');
					$data['deluxe_contact_footer'] = $this->config->get('theme_deluxe_contact_footer');	
					$data['deluxe_return_footer'] = $this->config->get('theme_deluxe_return_footer');	
					$data['deluxe_sitemap_footer'] = $this->config->get('theme_deluxe_sitemap_footer');	
					$data['deluxe_manufacturer_footer'] = $this->config->get('theme_deluxe_manufacturer_footer');	
					$data['deluxe_voucher_footer'] = $this->config->get('theme_deluxe_voucher_footer');	
					$data['deluxe_affiliate_footer'] = $this->config->get('theme_deluxe_affiliate_footer');	
					$data['deluxe_special_footer'] = $this->config->get('theme_deluxe_special_footer');
					$data['deluxe_account_footer'] = $this->config->get('theme_deluxe_account_footer');
					$data['deluxe_order_footer'] = $this->config->get('theme_deluxe_order_footer');
					$data['deluxe_wishlist_footer'] = $this->config->get('theme_deluxe_wishlist_footer');
					$data['deluxe_newsletter_footer'] = $this->config->get('theme_deluxe_newsletter_footer');
					$data['deluxe_show_fluid_map_footer'] = $this->config->get('theme_deluxe_show_fluid_map_footer');
					$data['deluxe_show_map_open'] = $this->config->get('theme_deluxe_show_map_open');
					$data['deluxe_longitude_fluid_map'] = $this->config->get('theme_deluxe_longitude_fluid_map');					
					$data['deluxe_latitude_fluid_map'] = $this->config->get('theme_deluxe_latitude_fluid_map');
					$data['deluxe_fluid_map_zoom'] = $this->config->get('theme_deluxe_fluid_map_zoom');
                    $data['deluxe_license_text'] = html_entity_decode ($this->config->get('theme_deluxe_license_text')[$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8');	
					$data['deluxe_counter'] = html_entity_decode ($this->config->get('theme_deluxe_counter'), ENT_QUOTES, 'UTF-8');
					$data['deluxe_finfo'] = $this->config->get('theme_deluxe_finfo');
					$data['deluxe_fadd'] = $this->config->get('theme_deluxe_fadd');
					$data['deluxe_fcat'] = $this->config->get('theme_deluxe_fcat');
					$data['deluxe_fcont'] = $this->config->get('theme_deluxe_fcont');
					$data['deluxe_top_links4info'] = $this->config->get('theme_deluxe_top_links4info');				
					$data['deluxe_top_links4add'] = $this->config->get('theme_deluxe_top_links4add');				
					$data['deluxe_top_links4cat'] = $this->config->get('theme_deluxe_top_links4cat');				
					$data['deluxe_top_links4cont'] = $this->config->get('theme_deluxe_top_links4cont');
					$data['deluxe_description_map_logo'] = html_entity_decode ($this->config->get('theme_deluxe_description_map_logo')[$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8');
					$data['deluxe_fluid_map_key'] = $this->config->get('theme_deluxe_fluid_map_key');
					$data['deluxe_show_info_marker_block'] = $this->config->get('theme_deluxe_show_info_marker_block');
					$data['deluxe_phone_footer'] = $this->config->get('theme_deluxe_phone_footer');
					$data['deluxe_time_footer'] = $this->config->get('theme_deluxe_time_footer');
					$data['deluxe_mail_footer'] = $this->config->get('theme_deluxe_mail_footer');
					$data['deluxe_address_footer'] = $this->config->get('theme_deluxe_address_footer');
					$data['deluxe_list_or_grid'] = $this->config->get('theme_deluxe_list_or_grid');
					$data['deluxe_lazy'] = $this->config->get('theme_deluxe_lazy');
					$data['deluxe_options_mainimg_cat'] = $this->config->get('theme_deluxe_options_mainimg_cat');

					$mapcode = str_replace("<iframe", "<iframe class=\"lazyload\" style=\"width:100%; height: 330px;border:0;\"", html_entity_decode ($this->config->get('theme_deluxe_mapcode')[$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8'));
					$mapcode = str_replace("frameborder=\"0\" style=\"border:0\"", "", $mapcode);
					$data['deluxe_mapcode'] = str_replace("src", "data-src", $mapcode);					
                    if ($this->config->get('theme_deluxe_show_fluid_map_home')) {
					$data['class_home'] = '/';
		            } else {
					$data['class_home'] = $this->request->server['REQUEST_URI'];
					}					
					$data['deluxe_map_noapi'] = $this->config->get('theme_deluxe_map_noapi');
					
					if ($this->request->server['HTTPS']) {
						$server = $this->config->get('config_ssl');
					} else {
						$server = $this->config->get('config_url');
					}
					if (is_file(DIR_IMAGE . $this->config->get('theme_deluxe_footer_imgico'))) {
						$data['map_img'] = $server . 'image/' . $this->config->get('theme_deluxe_footer_imgico');
					} else {
						$data['map_img'] = '';
					}

					
					$deluxe_top_links3 = $this->config->get('theme_deluxe_top_links3');
					$data['theme_tells'] = array();
					if(isset($deluxe_top_links3) && is_array($deluxe_top_links3)) foreach ($deluxe_top_links3 as $theme_tells) {
						$data['theme_tells'][] = array(
								'title' 			=> html_entity_decode($theme_tells['title'][$this->config->get('config_language_id')], ENT_QUOTES, 'UTF-8'),
								'title2' 			=> str_replace(array('(', ')', ' ', '-'), '', $theme_tells['title'][$this->config->get('config_language_id')] ),
		                        'image' 			=> $this->model_tool_image->resize($theme_tells['image'],18, 18),
						);
					 }
					
					$currency_code = !empty($this->session->data['currency']) ? $this->session->data['currency'] : $this->config->get('config_currency');
				    $var_currency = array();
				    $var_currency['value'] = $this->currency->getValue($currency_code);
				    $var_currency['symbol_left'] = $this->currency->getSymbolLeft($currency_code);
				    $var_currency['symbol_right'] = $this->currency->getSymbolRight($currency_code);
				    $var_currency['decimals'] = $this->currency->getDecimalPlace($currency_code);
				    $var_currency['decimal_point'] = $this->language->get('decimal_point');
				    $var_currency['thousand_point'] = $this->language->get('thousand_point');
				    $data['currency'] = $var_currency;
			
				    $data['config_stock'] = $this->config->get('config_stock_checkout');
      ]]></add>
</operation>
<!-- new_positions -->
<operation>
      <search><![CDATA[
		return $this->load->view('common/footer', $data);
      ]]></search>
      <add position="before"><![CDATA[
         $data['content_mail'] =  $this->load->controller('common/content_mail');
		 $data['content_top3'] =  $this->load->controller('common/content_top3');
      ]]></add>
</operation>
</file>
<file path="catalog/controller/account/wishlist.php">
<!-- pop up wishlist\cart\compare -->
<operation>
      <search><![CDATA[
					$this->load->model('catalog/product');
      ]]></search>
      <add position="after"><![CDATA[
                    $this->load->model('tool/image');
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$json['success'] = sprintf($this->language->get('text_success'), $this->url->link('product/product', 'product_id=' . (int)$this->request->post['product_id']), $product_info['name'], $this->url->link('account/wishlist'));
      ]]></search>
      <add position="replace"><![CDATA[
                    $json['success'] = sprintf($this->language->get('text_success'), $this->model_tool_image->resize($product_info['image'], '80', '80'), $this->url->link('product/product', 'product_id=' . (int)$this->request->post['product_id']), $product_info['name'], $this->url->link('account/wishlist'));
      ]]></add>
</operation>
</file>	

<file path="catalog/controller/account/account.php">

<operation>
      <search><![CDATA[
					$data['edit'] = $this->url->link('account/edit', '', true);
      ]]></search>
      <add position="before"><![CDATA[
                    $data['deluxe_wishlist_footer'] = $this->config->get('theme_deluxe_wishlist_footer');
					$data['deluxe_return_footer'] = $this->config->get('theme_deluxe_return_footer');
					$data['deluxe_newsletter_footer'] = $this->config->get('theme_deluxe_newsletter_footer');
					$data['deluxe_download_footer'] = $this->config->get('theme_deluxe_download_footer');
      ]]></add>
</operation>

</file>	
<file path="catalog/controller/extension/module/account.php">

<operation>
      <search><![CDATA[
					$data['logged'] = $this->customer->isLogged();
      ]]></search>
      <add position="before"><![CDATA[
                    $data['deluxe_wishlist_footer'] = $this->config->get('theme_deluxe_wishlist_footer');
					$data['deluxe_return_footer'] = $this->config->get('theme_deluxe_return_footer');
					$data['deluxe_newsletter_footer'] = $this->config->get('theme_deluxe_newsletter_footer');
					$data['deluxe_download_footer'] = $this->config->get('theme_deluxe_download_footer');
      ]]></add>
</operation>
</file>	

<file path="catalog/controller/common/cart.php">
<!-- cart style-->
<operation>
      <search><![CDATA[
					$data['products'] = array();
      ]]></search>
      <add position="before"><![CDATA[
                    if ($this->request->server['HTTPS']) {
			        $server = $this->config->get('config_ssl');
		             } else {
			        $server = $this->config->get('config_url');
		             }
                    $data['deluxe_cart_img'] = html_entity_decode ($this->config->get('theme_deluxe_cart_img'), ENT_QUOTES, 'UTF-8');
      ]]></add>
</operation>
</file>	
<file path="catalog/controller/product/compare.php">
<operation>
      <search><![CDATA[
					$this->load->language('product/compare');
      ]]></search>
      <add position="after"><![CDATA[
				    $this->load->language('extension/module/deluxe');
      ]]></add>
</operation>
<!-- pop up wishlist\cart\compare -->
<operation>
      <search><![CDATA[
					$this->load->model('catalog/product');
      ]]></search>
      <add position="after"><![CDATA[
                    $this->load->model('tool/image');
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$json['success'] = sprintf($this->language->get('text_success'), $this->url->link('product/product', 'product_id=' . $this->request->post['product_id']), $product_info['name'], $this->url->link('product/compare'));
      ]]></search>
      <add position="replace"><![CDATA[
                    $json['success'] = sprintf($this->language->get('text_success'), $this->model_tool_image->resize($product_info['image'], '80', '80'), $this->url->link('product/product', 'product_id=' . $this->request->post['product_id']), $product_info['name'], $this->url->link('product/compare'));
      ]]></add>
</operation>
</file>	
<file path="catalog/controller/checkout/cart.php">
<operation>
      <search><![CDATA[
					$data['breadcrumbs'] = array();
      ]]></search>
      <add position="before"><![CDATA[
					$data['deluxe_cart_forder'] = $this->config->get('deluxe_cart_forder');
					$this->load->language('extension/module/deluxe');
			
					 
      ]]></add>
</operation>
<!-- pop up wishlist\cart\compare -->
<operation>
      <search><![CDATA[
					if (!$json) {
      ]]></search>
      <add position="before"><![CDATA[
                    $this->load->model('tool/image');
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$json['success'] = sprintf($this->language->get('text_success'), $this->url->link('product/product', 'product_id=' . $this->request->post['product_id']), $product_info['name'], $this->url->link('checkout/cart'));
      ]]></search>
      <add position="replace"><![CDATA[
                    $json['success'] = sprintf($this->language->get('text_success'), $this->model_tool_image->resize($product_info['image'], '80', '80'), $this->url->link('product/product', 'product_id=' . $this->request->post['product_id']), $product_info['name'], $this->url->link('checkout/cart'));
      ]]></add>
</operation>
</file>	
<file path="catalog/controller/product/{manufacturer,special,search}.php">
<operation>
      <search><![CDATA[
					$this->load->model('tool/image');
      ]]></search>
      <add position="after"><![CDATA[
	           $this->load->language('extension/module/deluxe');
			      
	                $data['language_id'] = $this->config->get('config_language_id');
				
					$data['deluxe_sort_cat'] = $this->config->get('theme_deluxe_sort_cat');
					$data['deluxe_count_cat'] = $this->config->get('theme_deluxe_count_cat');
					$data['deluxe_wishlist_cat'] = $this->config->get('theme_deluxe_wishlist_cat');
	                $data['deluxe_compare_cat'] = $this->config->get('theme_deluxe_compare_cat');
                    $data['deluxe_rating_cat'] = $this->config->get('theme_deluxe_rating_cat');
					$data['deluxe_name_sticker_product_new'] = $this->config->get('theme_deluxe_name_sticker_product_new');
					$data['deluxe_name_sticker_product_top'] = $this->config->get('theme_deluxe_name_sticker_product_top');		
					$data['deluxe_sticker_sale_product_auto'] = $this->config->get('theme_deluxe_sticker_sale_product_auto');	
					$data['deluxe_sticker_new_product_auto'] = $this->config->get('theme_deluxe_sticker_new_product_auto');
					$data['deluxe_sticker_product_new_day'] = $this->config->get('theme_deluxe_sticker_product_new_day');
					$data['deluxe_sticker_product_top_rating'] = $this->config->get('theme_deluxe_sticker_product_top_rating');
					$data['deluxe_sticker_product_top_viewed'] = $this->config->get('theme_deluxe_sticker_product_top_viewed');
					$data['deluxe_sticker_product_top_ratinr'] = $this->config->get('theme_deluxe_sticker_product_top_ratinr');
					$data['deluxe_sticker_top_product_auto'] = $this->config->get('theme_deluxe_sticker_top_product_auto');
					$data['deluxe_limit_symbolst'] = $this->config->get('theme_deluxe_limit_symbolst');
					$data['deluxe_description_cat'] = $this->config->get('theme_deluxe_description_cat');
					$data['deluxe_limit_atr'] = $this->config->get('theme_deluxe_limit_atr');
					$data['deluxe_atr_catsm'] = $this->config->get('theme_deluxe_atr_catsm');
					$data['deluxe_description_catsm'] = $this->config->get('theme_deluxe_description_catsm');
					$data['deluxe_lazy'] = $this->config->get('theme_deluxe_lazy');
					$data['deluxe_forder'] = $this->config->get('theme_deluxe_forder');
					$data['deluxe_options_prise_cat'] = $this->config->get('theme_deluxe_options_prise_cat');
					$data['deluxe_img_additional'] = $this->config->get('theme_deluxe_img_additional');
					$data['autocalc_select_first'] = $this->config->get('config_autocalc_select_first');
					$data['aridius_qckview_status'] = $this->config->get('module_aridius_qckview_status');		
					$data['aridiusinstock_status'] = $this->config->get('module_aridiusinstock_status');				
      ]]></add>
</operation>
<!-- sort -->
<operation>
      <search><![CDATA[
					$sort = 'p.sort_order';
      ]]></search>
      <add position="replace"><![CDATA[
                    $sort = $this->config->get('deluxe_sort');
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$order = 'ASC';
      ]]></search>
      <add position="replace"><![CDATA[
                    if ($this->config->get('deluxe_sort_form') == 0) { 
					$order = 'ASC';
					} else {
					$order = 'DESC';
					}
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['products'][] = array(
      ]]></search>
      <add position="before"><![CDATA[
	                $deluxe_img_additional = $this->config->get('deluxe_img_additional');
	                if ($deluxe_img_additional !=1) {
					  $results_img = $this->model_catalog_product->getProductImages($result['product_id']);
					  $img_hover = array();
					  foreach ($results_img as $result_img) {
						if ($result_img['image']) {
							$imgage_hover = $this->model_tool_image->resize($result_img['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height'));
						} else {
							$imgage_hover = false;
						}
						$img_hover[1] = $imgage_hover;
						break;
					  }		  
	                } else {
						$img_hover = false;
					}
					
					$data['deluxe_options_prise'] = $this->config->get('deluxe_options_prise');
					$check_options = array();
					$check_options = $this->config->get('deluxe_options');
					
					$options = array();
					foreach ($this->model_catalog_product->getProductOptions($result['product_id']) as $option) {
                    $product_option_value_data = array();
                    foreach ($option['product_option_value'] as $option_value) {
                        if (!$option_value['subtract'] || ($option_value['quantity'] > 0)) {
                            if ((($this->config->get('config_customer_price') && $this->customer->isLogged()) || !$this->config->get('config_customer_price')) && (float) $option_value['price']) {
                                $options_price   = $this->currency->format($this->tax->calculate($option_value['price'], $result['tax_class_id'], $this->config->get('config_tax') ? 'P' : false), $this->session->data['currency']);
                                $options_price_n = ($this->tax->calculate($option_value['price'], $result['tax_class_id'], $this->config->get('config_tax') ? 'P' : false));
                            } else {
                                $options_price   = false;
                                $options_price_n = false;
                            }
                            if (isset($check_options) && (in_array($option['option_id'], $check_options))) {
                                $product_option_value_data[] = array(
                                    'product_option_value_id' => $option_value['product_option_value_id'],
                                    'option_value_id' => $option_value['option_value_id'],
                                    'name' => $option_value['name'],
                                    'image_opt' => $option_value['image_opt'] ? $this->model_tool_image->resize($option_value['image_opt'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height')) : '',
                                    'image' => $option_value['image'] ? $this->model_tool_image->resize($option_value['image'], $this->config->get('deluxe_product_optionimg_width_cat'), $this->config->get('deluxe_product_optionimg_height_cat')) : '',
                                    'price' => $options_price,
                                    'price_n' => $options_price_n,
                                    'opt_thumb' => $this->model_tool_image->resize($option_value['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height')),
                                    'price_prefix' => $option_value['price_prefix']
                                );
                            }
                        }
                    }
                    if (isset($check_options) && (in_array($option['option_id'], $check_options))) {
                        $options[] = array(
                            'product_option_id' => $option['product_option_id'],
                            'product_option_value' => $product_option_value_data,
                            'option_id' => $option['option_id'],
                            'name' => $option['name'],
                            'type' => $option['type'],
                            'value' => $option['value'],
                            'required' => $option['required']
                         );
                     }
                   }
				
				   $check_attributes= array();
				   $check_attributes = $this->config->get('theme_deluxe_attribute');		
				  
 				   $attribute_cat = array();	

				   foreach ($this->model_catalog_product->getProductAttributes($result['product_id']) as $attribute_groupp) {
				 
					  foreach ($attribute_groupp['attribute'] as $attribute) {
						if (isset($check_attributes) && (in_array($attribute['attribute_id'], $check_attributes ))) {						
							$attribute_cat[] = array(
							'attribute_id' => $attribute['attribute_id'],
								'name'    => $attribute['name'],
								'text'    => $attribute['text'],
						   );				
						 }	
					   }
					}
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['products'][] = array(
      ]]></search>
      <add position="after"><![CDATA[
	  'reviews' => $result['reviews'],
	                'img_hover' => $img_hover,
					'price_no_format' => $result['price'],
					'special_no_format' => $result['special'],	
					'price_calck'       => $price_calck,
					'special_calck'     => $special_calck,					
					'min_quantity'	=> $result['minimum'],
					'price_value'   => $result['price'],
					'special_value' => $result['special'],
					'dateadded'  => $result['date_added'],
					'viewed'     => $result['viewed'],
					'rating'     => $result['rating'],
					'attribute_cat' => $attribute_cat,	
					'options' => $options,
			        'stickers2' => $this->model_catalog_product->getProductStickerProductId($result['product_id']),	
					'quantity'   => $result['quantity'],	
					'price_sticker'        => $result['price'],
					'special_sticker'      => (isset($result['special']) ? $result['special'] : false),		
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['sort'] = $sort;
      ]]></search>
      <add position="before"><![CDATA[
                    $data['page'] = $page;
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$price = $this->currency->format($this->tax->calculate($result['price'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);
      ]]></search>
      <add position="after"><![CDATA[
                    $price_calck = ($this->tax->calculate($result['price'], $result['tax_class_id'], $this->config->get('config_tax')));
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$price = false;
      ]]></search>
      <add position="after"><![CDATA[
                    $price_calck = false;
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$special = $this->currency->format($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')), $this->session->data['currency']);
      ]]></search>
      <add position="after"><![CDATA[
                    $special_calck = ($this->tax->calculate($result['special'], $result['tax_class_id'], $this->config->get('config_tax')));
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$special = false;
      ]]></search>
      <add position="after"><![CDATA[
                    $special_calck = false;
      ]]></add>
</operation>
</file>
<file path="catalog/controller/product/compare.php">
<operation>
      <search><![CDATA[
					$this->load->model('tool/image');
      ]]></search>
      <add position="after"><![CDATA[
					$data['aridiusinstock_status'] = $this->config->get('module_aridiusinstock_status');
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['products'][$product_id] = array(
      ]]></search>
      <add position="after"><![CDATA[
					'quantity'   => $product_info['quantity'],
      ]]></add>
</operation>

</file>
<file path="catalog/controller/account/wishlist.php">
<operation>
      <search><![CDATA[
					$this->load->model('tool/image');
      ]]></search>
      <add position="after"><![CDATA[
					$data['aridiusinstock_status'] = $this->config->get('module_aridiusinstock_status');
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['products'][] = array(
      ]]></search>
      <add position="after"><![CDATA[
					'quantity'   => $product_info['quantity'],
      ]]></add>
</operation>
</file>
<file path="catalog/model/catalog/product.php">
<!-- timer -->
<operation>
      <search><![CDATA[
					public function getProducts($data = array()) {
      ]]></search>
      <add position="before"><![CDATA[
					public function getSpecialDates($product_id) {
                    $query = $this->db->query("SELECT price, date_start, date_end FROM " . DB_PREFIX . "product_special WHERE product_id = '" . (int)$product_id . "' AND ((date_start = '0000-00-00' OR date_start < NOW()) AND (date_end = '0000-00-00' OR date_end > NOW())) ORDER BY priority ASC, price ASC LIMIT 1");
                    if ($query->num_rows) {
                    return array(
                    'date_start' => $query->row['date_start'],
                    'date_end'   => $query->row['date_end'],
                    );
                    } else {
                    return false;
                    }
                          }
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$sort_data = array(
      ]]></search>
      <add position="before"><![CDATA[
                    $qt_null = $this->config->get('deluxe_qt_null');
					$sort_quantity = '';
					if ($qt_null == 0) {
					$sort_quantity = '(p.quantity > 0) DESC,';
					}
					
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$sql .= " ORDER BY
      ]]></search>
      <add position="replace"><![CDATA[
                    $sql .= " ORDER BY ".$sort_quantity."
      ]]></add>
</operation>
</file>
<file path="catalog/controller/extension/module/featured.php">
<!-- stickers -->
<operation>
      <search><![CDATA[
					$data['products'][] = array(
      ]]></search>
      <add position="after"><![CDATA[
	  'quantity'   => $product_info['quantity'],	
	    'reviews' => $product_info['reviews'],
					'dateadded'  => $product_info['date_added'],
					'viewed'     => $product_info['viewed'],
					'rating'     => $product_info['rating'],
					'stickers2' => $this->model_catalog_product->getProductStickerProductId($product_info['product_id']),
					'price_sticker'        => $product_info['price'],
					'special_sticker'      => (isset($product_info['special']) ? $product_info['special'] : false),	
      ]]></add>
</operation>
<!-- stickers -->
<operation>
      <search><![CDATA[
					$data['products'] = array();
      ]]></search>
      <add position="before"><![CDATA[

	  		        $data['language_id'] = $this->config->get('config_language_id');
					$data['deluxe_name_sticker_product_new'] = $this->config->get('theme_deluxe_name_sticker_product_new');
					$data['deluxe_name_sticker_product_top'] = $this->config->get('theme_deluxe_name_sticker_product_top');		
					$data['deluxe_sticker_sale_product_auto'] = $this->config->get('theme_deluxe_sticker_sale_product_auto');	
					$data['deluxe_sticker_new_product_auto'] = $this->config->get('theme_deluxe_sticker_new_product_auto');
					$data['deluxe_sticker_product_new_day'] = $this->config->get('theme_deluxe_sticker_product_new_day');
					$data['deluxe_sticker_product_top_rating'] = $this->config->get('theme_deluxe_sticker_product_top_rating');
					$data['deluxe_sticker_product_top_viewed'] = $this->config->get('theme_deluxe_sticker_product_top_viewed');
					$data['deluxe_sticker_product_top_ratinr'] = $this->config->get('theme_deluxe_sticker_product_top_ratinr');
					$data['deluxe_sticker_top_product_auto'] = $this->config->get('theme_deluxe_sticker_top_product_auto');
					$data['deluxe_limit_symbolst'] = $this->config->get('theme_deluxe_limit_symbolst');
		            $data['deluxe_rating_cat'] = $this->config->get('theme_deluxe_rating_cat');
			        $data['deluxe_wishlist_cat'] = $this->config->get('theme_deluxe_wishlist_cat');	
				    $data['deluxe_compare_cat'] = $this->config->get('theme_deluxe_compare_cat');
		            $data['deluxe_forder'] = $this->config->get('theme_deluxe_forder');
		            $data['deluxe_lazy'] = $this->config->get('theme_deluxe_lazy');
			        $data['width'] = $setting['width'];
			        $data['height'] = $setting['height'];
	                $data['aridius_qckview_status'] = $this->config->get('module_aridius_qckview_status');		
                    $data['aridiusinstock_status'] = $this->config->get('module_aridiusinstock_status');			
      ]]></add>
</operation>
</file>
<file path="catalog/controller/extension/module/{special,bestseller,latest}.php">
<!-- stickers -->
<operation>
      <search><![CDATA[
					$data['products'][] = array(
      ]]></search>
      <add position="after"><![CDATA[
	  'reviews' => $result['reviews'],
	   'quantity'   => $result['quantity'],	
	   
					'dateadded'  => $result['date_added'],
					'viewed'     => $result['viewed'],
					'rating'     => $result['rating'],
					'stickers2' => $this->model_catalog_product->getProductStickerProductId($result['product_id']),
					'price_sticker'        => $result['price'],
					'special_sticker'      => (isset($result['special']) ? $result['special'] : false),	
      ]]></add>
</operation>
<!-- stickers -->
<operation>
      <search><![CDATA[
					$data['products'][] = array(
				
      ]]></search>
      <add position="before"><![CDATA[

	  		   $data['language_id'] = $this->config->get('config_language_id');
					$data['deluxe_name_sticker_product_new'] = $this->config->get('theme_deluxe_name_sticker_product_new');
					$data['deluxe_name_sticker_product_top'] = $this->config->get('theme_deluxe_name_sticker_product_top');		
					$data['deluxe_sticker_sale_product_auto'] = $this->config->get('theme_deluxe_sticker_sale_product_auto');	
					$data['deluxe_sticker_new_product_auto'] = $this->config->get('theme_deluxe_sticker_new_product_auto');
					$data['deluxe_sticker_product_new_day'] = $this->config->get('theme_deluxe_sticker_product_new_day');
					$data['deluxe_sticker_product_top_rating'] = $this->config->get('theme_deluxe_sticker_product_top_rating');
					$data['deluxe_sticker_product_top_viewed'] = $this->config->get('theme_deluxe_sticker_product_top_viewed');
					$data['deluxe_sticker_product_top_ratinr'] = $this->config->get('theme_deluxe_sticker_product_top_ratinr');
					$data['deluxe_sticker_top_product_auto'] = $this->config->get('theme_deluxe_sticker_top_product_auto');
					$data['deluxe_limit_symbolst'] = $this->config->get('theme_deluxe_limit_symbolst');
		            $data['deluxe_rating_cat'] = $this->config->get('theme_deluxe_rating_cat');
			        $data['deluxe_wishlist_cat'] = $this->config->get('theme_deluxe_wishlist_cat');	
				    $data['deluxe_compare_cat'] = $this->config->get('theme_deluxe_compare_cat');
		            $data['deluxe_forder'] = $this->config->get('theme_deluxe_forder');
		            $data['deluxe_lazy'] = $this->config->get('theme_deluxe_lazy');
			        $data['width'] = $setting['width'];
			        $data['height'] = $setting['height'];
                    $data['aridius_qckview_status'] = $this->config->get('module_aridius_qckview_status');		
                    $data['aridiusinstock_status'] = $this->config->get('module_aridiusinstock_status');		
      ]]></add>
</operation>
</file>
<!-- banner START -->
<file path="catalog/controller/extension/module/{banner,slideshow}.php">
<operation>
      <search><![CDATA[
					'link'  => $result['link'],
      ]]></search>
      <add position="after"><![CDATA[
				      'description' => html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8'),
      ]]></add>
</operation>
</file> 
<file path="catalog/controller/extension/module/{banner,slideshow,carousel}.php">
<operation>
      <search><![CDATA[
					$this->document->addStyle('catalog/view/javascript/jquery/owl-carousel/owl.carousel.css');
      ]]></search>
      <add position="replace"><![CDATA[
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$this->document->addScript('catalog/view/javascript/jquery/owl-carousel/owl.carousel.min.js');
      ]]></search>
      <add position="replace"><![CDATA[
      ]]></add>
</operation>
</file>
<file path="catalog/controller/extension/module/carousel.php">
<operation>
      <search><![CDATA[
					$this->document->addStyle('catalog/view/javascript/jquery/swiper/css/swiper.min.css');
      ]]></search>
      <add position="replace"><![CDATA[
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$this->document->addStyle('catalog/view/javascript/jquery/swiper/css/opencart.css');
      ]]></search>
      <add position="replace"><![CDATA[
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$this->document->addScript('catalog/view/javascript/jquery/swiper/js/swiper.jquery.js');
      ]]></search>
      <add position="replace"><![CDATA[
      ]]></add>
</operation>
</file>  
<file path="catalog/controller/extension/module/banner.php">
<operation>
      <search><![CDATA[
					$this->document->addStyle('catalog/view/javascript/jquery/owl-carousel/owl.transitions.css');
      ]]></search>
      <add position="replace"><![CDATA[
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$data['banners'] = array();
      ]]></search>
      <add position="before"><![CDATA[
	                $data['deluxe_lazy'] = $this->config->get('deluxe_lazy');
      ]]></add>
</operation>
</file> 
<file path="admin/view/template/design/banner_form.twig">
<operation>
      <search><![CDATA[
					<td class="text-left">{{ entry_link }}</td>
      ]]></search>
      <add position="after"><![CDATA[
				   <td class="text-center"><i class="fa fa-file-text" aria-hidden="true"></i></td>
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
                    <td class="text-left" style="width: 30%;"><input type="text" name="banner_image[{{ language.language_id }}][{{ image_row }}][link]" value="{{ banner_image.link }}" placeholder="{{ entry_link }}" class="form-control" /></td>
      ]]></search>
      <add position="after"><![CDATA[
					<td class="text-center"><textarea style="width:300px; height:150px;" name="banner_image[{{ language['language_id'] }}][{{ image_row }}][description]" id="description">{{ banner_image['description'] }}</textarea></td>
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					<td colspan="4"></td>
      ]]></search>
      <add position="replace"><![CDATA[
			        <td colspan="5"></td>
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					html += '  <td class="text-left" style="width: 30%;"><input type="text" name="banner_image[' + language_id + '][' + image_row + '][link]" value="" placeholder="{{ entry_link }}" class="form-control" /></td>';
      ]]></search>
      <add position="after"><![CDATA[
	                html += '<td class="text-center"><textarea style="width:300px; height:150px;" name="banner_image[' + language_id + '][' + image_row + '][description]" id="description"></textarea></td>';	
      ]]></add>
</operation>
</file>
<file path="admin/controller/design/banner.php">
<operation>
      <search><![CDATA[
					'title'      => $banner_image['title'],
      ]]></search>
      <add position="after"><![CDATA[
				    'description' => $banner_image['description'],
      ]]></add>
</operation>
 </file> 
 <file path="admin/model/design/banner.php">
<operation>
      <search><![CDATA[
					$this->db->query("INSERT INTO " . DB_PREFIX . "banner_image SET banner_id = '" . (int)$banner_id . "', language_id = '" . (int)$language_id . "', title = '" .  $this->db->escape($banner_image['title']) . "', link = '" .  $this->db->escape($banner_image['link']) . "', image = '" .  $this->db->escape($banner_image['image']) . "', sort_order = '" .  (int)$banner_image['sort_order'] . "'");
      ]]></search>
      <add position="replace"><![CDATA[
				    $this->db->query("INSERT INTO " . DB_PREFIX . "banner_image SET banner_id = '" . (int)$banner_id . "', language_id = '" . (int)$language_id . "', title = '" .  $this->db->escape($banner_image['title']) . "', description = '" .  $this->db->escape($banner_image['description']) . "', link = '" .  $this->db->escape($banner_image['link']) . "', image = '" .  $this->db->escape($banner_image['image']) . "', sort_order = '" .  (int)$banner_image['sort_order'] . "'");
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					$this->db->query("INSERT INTO " . DB_PREFIX . "banner_image SET banner_id = '" . (int)$banner_id . "', language_id = '" . (int)$language_id . "', title = '" .  $this->db->escape($banner_image['title']) . "', link = '" .  $this->db->escape($banner_image['link']) . "', image = '" .  $this->db->escape($banner_image['image']) . "', sort_order = '" . (int)$banner_image['sort_order'] . "'");
      ]]></search>
      <add position="replace"><![CDATA[
				    $this->db->query("INSERT INTO " . DB_PREFIX . "banner_image SET banner_id = '" . (int)$banner_id . "', language_id = '" . (int)$language_id . "', title = '" .  $this->db->escape($banner_image['title']) . "', description = '" .  $this->db->escape($banner_image['description']) . "', link = '" .  $this->db->escape($banner_image['link']) . "', image = '" .  $this->db->escape($banner_image['image']) . "', sort_order = '" . (int)$banner_image['sort_order'] . "'");
      ]]></add>
</operation>
<operation>
      <search><![CDATA[
					'link'       => $banner_image['link'],
      ]]></search>
      <add position="after"><![CDATA[
				    'description'       => $banner_image['description'],
      ]]></add>
</operation>
</file>
<file path="catalog/language/ru-ru/product/product.php">
		<operation>
			  <search><![CDATA[
						$_['text_reviews']                            = '%s отзывов';
			  ]]></search>
			  <add position="replace"><![CDATA[
							$_['text_reviews']                            = 'Отзывы: %s';
			  ]]></add>
		</operation>
</file>
<file path="catalog/controller/product/manufacturer.php"> 
<operation>
      <search><![CDATA[
					foreach ($results as $result) {
      ]]></search>
      <add position="before"><![CDATA[
	                $data['deluxe_atr_catsm'] = $this->config->get('deluxe_atr_catsm');
					$data['deluxe_description_catsm'] = $this->config->get('deluxe_description_catsm');
      ]]></add>
</operation>
</file>
<file path="system/library/cart/cart.php">
<operation>
			  <search><![CDATA[
			'quantity'        => $cart['quantity'],
			  ]]></search>
			  <add position="after"><![CDATA[
			'stock_qty' => $product_query->row['quantity'],
			  ]]></add>
</operation>
</file>
<file path="catalog/controller/common/menu.php">
<operation>
      <search><![CDATA[
$data['categories'] = array();			
      ]]></search>
      <add position="before"><![CDATA[
if ($this->config->get('theme_deluxe_see_amenu')==1) {
      ]]></add>
</operation>


<operation>
      <search><![CDATA[
        $theme_deluxe_header_var = $this->config->get('theme_deluxe_header_var');	 			
      ]]></search>
      <add position="before"><![CDATA[
	  
	    } else {  
	    
		$data['categories'] = array();
		$this->load->model('catalog/aridiusmenu');
		$categories = $this->model_catalog_aridiusmenu->getCategories(0);

	    foreach ($categories as $category) {
		if ($category['image']) {
		$image_main = $this->model_tool_image->resize($category['image'],$this->config->get('theme_deluxe_photos_width_image_main'), $this->config->get('theme_deluxe_photos_height_image_main'));
		} else {
		$image_main = '';
		};
		
			if ($category['image_menu_ico']) {
			$image_menu_icol = $this->model_tool_image->resize($category['image_menu_ico'],22, 22);
			} else {		
			$image_menu_icol = '';
			};
		
		// Level 2
		$children_data = array();
		$children = $this->model_catalog_aridiusmenu->getCategories($category['aridiusmenu_id']);
		
		foreach ($children as $child) {
		if ($child['image']) {
		$image = $this->model_tool_image->resize($child['image'],$this->config->get('theme_deluxe_photos_width_image_main'), $this->config->get('theme_deluxe_photos_height_image_main'));
		} else {
		$image = '';
		};
		
		$children_lv3_data = array();
		$children_lv3 = $this->model_catalog_aridiusmenu->getCategories($child['aridiusmenu_id']);
		
		foreach ($children_lv3 as $child_lv3) {
		$children_lv3_data[] = array(
		'name'     => $child_lv3['name'],
		'href' => $child_lv3['url'],
		);
		}
		
		if ($child['image']) {
		$img_lv2 = $this->model_tool_image->resize($child['image'],$this->config->get('theme_deluxe_photos_menu_width'), $this->config->get('theme_deluxe_photos_menu_height'));
		} else {
		$img_lv2 = '';
		};
		
		$children_data[] = array(
		'stickers'     => $child['stickers'],
		'children_lv3' => $children_lv3_data,
		'image2' => $img_lv2,
		'image_menu_ico2'     => '',
		'name'     => $child['name'],
		'href' => $child['url'],
		'image' => $image
		);
		}
		
		// Level 1
		$data['categories'][] = array(
		'top'     => $category['top'],
		'category_id' => 1,
		'image_main' => $image_main,
		'image_menu_icol' => $image_menu_icol,
		'stickers'     => $category['stickers'],
		'children' => $children_data,
		'name'     => $category['name'],
		'column'   => $category['columnn'] ? $category['columnn'] : 1,
		'href' => $category['url'],
		'image' => $image_main
		);
	}	  
	  
	};
      ]]></add>
</operation>
</file>
</modification>